<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bakal.ai — Plateforme de prospection intelligente</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;450;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --bg-primary: #0c0c0e;
  --bg-secondary: #111113;
  --bg-card: #18181b;
  --bg-card-hover: #1f1f23;
  --bg-elevated: #1c1c20;
  --border: #27272a;
  --border-light: #303033;
  --text-primary: #fafafa;
  --text-secondary: #a1a1aa;
  --text-muted: #63636e;
  --accent: #8b8b8b;
  --accent-light: #d4d4d8;
  --accent-glow: rgba(255, 255, 255, 0.04);
  --highlight: #e4e4e7;
  --success: #34d399;
  --success-bg: rgba(52, 211, 153, 0.1);
  --warning: #fbbf24;
  --warning-bg: rgba(251, 191, 36, 0.1);
  --danger: #f87171;
  --danger-bg: rgba(248, 113, 113, 0.1);
  --blue: #60a5fa;
  --blue-bg: rgba(96, 165, 250, 0.1);
  --purple: #a78bfa;
  --orange: #fb923c;
  --radius: 10px;
  --radius-sm: 8px;
  --radius-lg: 14px;
  --shadow: 0 1px 3px rgba(0,0,0,0.4), 0 8px 24px rgba(0,0,0,0.25);
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.3);
  --font: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --font-mono: 'JetBrains Mono', ui-monospace, monospace;
  --transition: 150ms ease;
}

[data-theme="light"] {
  --bg-primary: #f8f8f8;
  --bg-secondary: #ffffff;
  --bg-card: #ffffff;
  --bg-card-hover: #f4f4f5;
  --bg-elevated: #f4f4f5;
  --border: #e4e4e7;
  --border-light: #ebebed;
  --text-primary: #09090b;
  --text-secondary: #71717a;
  --text-muted: #a1a1aa;
  --accent: #71717a;
  --accent-light: #3f3f46;
  --accent-glow: rgba(0, 0, 0, 0.03);
  --highlight: #18181b;
  --success: #10b981;
  --success-bg: rgba(16, 185, 129, 0.08);
  --warning: #f59e0b;
  --warning-bg: rgba(245, 158, 11, 0.08);
  --danger: #ef4444;
  --danger-bg: rgba(239, 68, 68, 0.08);
  --blue: #3b82f6;
  --blue-bg: rgba(59, 130, 246, 0.08);
  --purple: #8b5cf6;
  --orange: #f97316;
  --shadow: 0 1px 3px rgba(0,0,0,0.06), 0 4px 16px rgba(0,0,0,0.04);
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.04);
}

* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: var(--font);
  background: var(--bg-primary);
  color: var(--text-primary);
  overflow-x: hidden;
  min-height: 100vh;
  font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  letter-spacing: -0.01em;
}

/* ═══════════ SIDEBAR ═══════════ */
.sidebar {
  position: fixed; left: 0; top: 0; bottom: 0;
  width: 240px;
  background: var(--bg-secondary);
  border-right: 1px solid var(--border);
  padding: 20px 12px;
  display: flex; flex-direction: column;
  z-index: 100;
}
.logo {
  display: flex; align-items: center; gap: 10px;
  padding: 0 8px 20px; margin-bottom: 4px;
  border-bottom: 1px solid var(--border);
}
.logo-icon {
  width: 28px; height: 28px;
  background: var(--text-primary);
  border-radius: 7px;
  display: flex; align-items: center; justify-content: center;
  font-weight: 700; font-size: 13px; color: var(--bg-primary);
}
.logo-text { font-weight: 600; font-size: 16px; letter-spacing: -0.3px; }
.logo-text span { color: var(--text-muted); font-weight: 400; }

.nav { margin-top: 12px; flex: 1; }
.nav-section { margin-bottom: 20px; }
.nav-label {
  font-size: 11px; font-weight: 500; letter-spacing: 0;
  color: var(--text-muted);
  padding: 0 10px; margin-bottom: 4px;
}
.nav-item {
  display: flex; align-items: center; gap: 10px;
  padding: 8px 10px; border-radius: var(--radius-sm);
  color: var(--text-secondary); font-size: 13px; font-weight: 400;
  cursor: pointer; transition: all var(--transition);
  margin-bottom: 1px;
}
.nav-item:hover { background: var(--accent-glow); color: var(--text-primary); }
.nav-item.active {
  background: var(--accent-glow); color: var(--text-primary);
  font-weight: 500;
}
.nav-item .icon { font-size: 15px; width: 20px; text-align: center; opacity: 0.7; }
.nav-item.active .icon { opacity: 1; }
.nav-item .badge {
  margin-left: auto; background: var(--bg-elevated);
  color: var(--text-muted); font-size: 10px; font-weight: 500;
  padding: 2px 7px; border-radius: 6px; border: 1px solid var(--border);
}

.sidebar-footer {
  border-top: 1px solid var(--border); padding-top: 12px;
}
.user-card {
  display: flex; align-items: center; gap: 10px;
  padding: 8px; border-radius: var(--radius-sm);
}
.user-avatar {
  width: 30px; height: 30px; border-radius: 8px;
  background: var(--bg-elevated); border: 1px solid var(--border);
  display: flex; align-items: center; justify-content: center;
  font-weight: 600; font-size: 11px; color: var(--text-secondary);
}
.user-info { flex: 1; }
.user-name { font-size: 13px; font-weight: 500; }
.user-plan { font-size: 11px; color: var(--text-muted); }

/* ═══════════ MAIN ═══════════ */
.main { margin-left: 240px; padding: 28px 32px; }

.page-header {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 28px;
}
.page-title { font-size: 22px; font-weight: 600; letter-spacing: -0.4px; }
.page-subtitle { color: var(--text-secondary); font-size: 13px; margin-top: 4px; }
.header-actions { display: flex; gap: 10px; }

.btn {
  padding: 8px 16px; border-radius: var(--radius-sm);
  font-family: var(--font); font-size: 13px; font-weight: 500;
  cursor: pointer; transition: all var(--transition); border: none;
  display: flex; align-items: center; gap: 6px;
}
.btn-primary {
  background: var(--text-primary);
  color: var(--bg-primary);
}
.btn-primary:hover { opacity: 0.85; }
.btn-ghost {
  background: transparent; color: var(--text-secondary);
  border: 1px solid var(--border);
}
.btn-ghost:hover { border-color: var(--border-light); color: var(--text-primary); background: var(--accent-glow); }
.btn-success { background: var(--success); color: #0c0c0e; }

/* ═══════════ TAB NAV ═══════════ */
.tabs {
  display: flex; gap: 0; margin-bottom: 24px;
  border-bottom: 1px solid var(--border);
}
.tab {
  padding: 10px 16px; font-size: 13px; font-weight: 500;
  color: var(--text-muted); cursor: pointer; position: relative;
  transition: color var(--transition);
}
.tab:hover { color: var(--text-secondary); }
.tab.active { color: var(--text-primary); }
.tab.active::after {
  content: ''; position: absolute; bottom: -1px; left: 0; right: 0;
  height: 1.5px; background: var(--text-primary); border-radius: 1px 1px 0 0;
}

/* ═══════════ KPI CARDS ═══════════ */
.kpi-grid {
  display: grid; grid-template-columns: repeat(6, 1fr); gap: 12px;
  margin-bottom: 28px;
}
.kpi-card {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 18px;
  transition: all var(--transition);
}
.kpi-card:hover { border-color: var(--border-light); }
.kpi-label { font-size: 11px; color: var(--text-muted); font-weight: 500; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.3px; }
.kpi-value { font-size: 24px; font-weight: 600; letter-spacing: -0.5px; }
.kpi-trend { font-size: 11px; margin-top: 6px; display: flex; align-items: center; gap: 4px; }
.kpi-trend.up { color: var(--success); }
.kpi-trend.down { color: var(--danger); }
.kpi-trend.neutral { color: var(--text-muted); }

/* ═══════════ SECTION GRID ═══════════ */
.section-grid {
  display: grid; grid-template-columns: 2fr 1fr; gap: 16px;
  margin-bottom: 28px;
}
.section-full { grid-column: 1 / -1; }

.card {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius-lg); overflow: hidden;
}
.card-header {
  padding: 16px 20px; display: flex; align-items: center;
  justify-content: space-between; border-bottom: 1px solid var(--border);
}
.card-title { font-size: 13px; font-weight: 600; display: flex; align-items: center; gap: 8px; }
.card-body { padding: 20px; }

/* ═══════════ CAMPAIGNS TABLE ═══════════ */
.campaign-table { width: 100%; border-collapse: collapse; }
.campaign-table th {
  text-align: left; font-size: 11px; font-weight: 500;
  color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.3px;
  padding: 0 16px 12px;
}
.campaign-table td { padding: 12px 16px; border-top: 1px solid var(--border); font-size: 13px; }
.campaign-table tr:hover td { background: var(--accent-glow); }

.status-badge {
  padding: 3px 8px; border-radius: 6px; font-size: 11px; font-weight: 500;
  display: inline-flex; align-items: center; gap: 4px;
}
.status-active { background: var(--success-bg); color: var(--success); }
.status-prep { background: var(--warning-bg); color: var(--warning); }
.status-done { background: var(--blue-bg); color: var(--blue); }

.perf-bar {
  width: 60px; height: 4px; background: var(--bg-elevated);
  border-radius: 2px; overflow: hidden;
}
.perf-fill { height: 100%; border-radius: 2px; }
.perf-good { background: var(--success); }
.perf-ok { background: var(--warning); }
.perf-bad { background: var(--danger); }

/* ═══════════ WEEKLY REPORT ═══════════ */
.report-card {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 20px;
  margin-bottom: 12px; transition: all 0.2s;
}
.report-card:hover { border-color: var(--accent); }
.report-header {
  display: flex; justify-content: space-between; align-items: center;
  margin-bottom: 16px;
}
.report-week { font-weight: 600; font-size: 14px; }
.report-date { font-size: 12px; color: var(--text-muted); }
.report-score {
  padding: 4px 12px; border-radius: 6px; font-size: 12px; font-weight: 600;
}
.score-excellent { background: rgba(51, 154, 240, 0.15); color: var(--blue); }
.score-good { background: var(--success-bg); color: var(--success); }
.score-ok { background: var(--warning-bg); color: var(--warning); }

.report-metrics {
  display: grid; grid-template-columns: repeat(5, 1fr); gap: 12px;
  margin-bottom: 16px;
}
.report-metric { text-align: center; }
.report-metric-value { font-size: 20px; font-weight: 700; }
.report-metric-label { font-size: 11px; color: var(--text-muted); margin-top: 2px; }

.report-synthesis {
  background: var(--bg-elevated); border-radius: var(--radius-sm);
  padding: 14px 16px; border-left: 2px solid var(--text-muted);
}
.report-synthesis-label {
  font-size: 11px; font-weight: 600; color: var(--text-secondary);
  margin-bottom: 6px; display: flex; align-items: center; gap: 6px;
}
.report-synthesis-text { font-size: 13px; color: var(--text-secondary); line-height: 1.5; }

/* ═══════════ CHART AREA ═══════════ */
.chart-container {
  height: 200px; position: relative; padding: 16px 0;
}
.chart-bars {
  display: flex; align-items: flex-end; gap: 8px; height: 100%;
  padding: 0 8px;
}
.chart-bar-group { flex: 1; display: flex; flex-direction: column; align-items: center; gap: 6px; }
.chart-bar-wrapper { display: flex; gap: 3px; align-items: flex-end; height: 160px; }
.chart-bar {
  width: 14px; border-radius: 4px 4px 0 0; transition: all 0.3s;
  opacity: 0.85;
}
.chart-bar:hover { opacity: 1; }
.chart-bar.email { background: var(--blue); }
.chart-bar.linkedin { background: var(--purple); }
.chart-bar-label { font-size: 10px; color: var(--text-muted); }
.chart-legend {
  display: flex; gap: 16px; justify-content: center;
  margin-top: 12px;
}
.chart-legend-item { display: flex; align-items: center; gap: 6px; font-size: 12px; color: var(--text-secondary); }
.chart-legend-dot { width: 8px; height: 8px; border-radius: 2px; }

/* ═══════════ SETTINGS & PROFIL PAGES ═══════════ */
.settings-grid { display: flex; flex-direction: column; gap: 20px; }
.form-stack { display: flex; flex-direction: column; gap: 14px; }
.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
.form-group.full { grid-column: 1 / -1; }
.form-label {
  font-size: 12px; font-weight: 500; color: var(--text-secondary);
  margin-bottom: 5px; display: block;
}
.form-textarea {
  width: 100%; padding: 10px 14px; border-radius: var(--radius-sm);
  background: var(--bg-elevated); border: 1px solid var(--border);
  color: var(--text-primary); font-family: var(--font); font-size: 13px;
  resize: vertical; line-height: 1.5;
}
.form-textarea:focus { border-color: var(--text-muted); outline: none; }
.form-hint { font-size: 11px; color: var(--text-muted); margin-top: 4px; }
.input-with-status { position: relative; display: flex; align-items: center; }
.input-with-status .form-input { flex: 1; padding-right: 120px; }
.input-status {
  position: absolute; right: 12px; font-size: 11px; font-weight: 500;
  color: var(--text-muted); padding: 2px 8px; border-radius: 4px;
  background: var(--bg-card);
}
.input-status.connected { color: var(--success); background: var(--success-bg); }
.input-status.error { color: var(--danger); background: var(--danger-bg); }
.form-input.mono { font-family: var(--font-mono); font-size: 13px; letter-spacing: -0.5px; }
.toggle-row {
  display: flex; align-items: center; justify-content: space-between;
  padding: 10px 0; border-bottom: 1px solid var(--border);
}
.toggle-row:last-of-type { border-bottom: none; }
.toggle-info { flex: 1; }
.toggle-title { font-size: 13px; font-weight: 500; }
.toggle-desc { font-size: 12px; color: var(--text-muted); margin-top: 2px; }
.toggle-switch {
  width: 40px; height: 22px; border-radius: 11px;
  background: var(--bg-elevated); border: 1px solid var(--border);
  position: relative; cursor: pointer; transition: all var(--transition); flex-shrink: 0;
}
.toggle-switch::after {
  content: ''; position: absolute; top: 2px; left: 2px;
  width: 16px; height: 16px; border-radius: 50%;
  background: var(--text-muted); transition: all var(--transition);
}
.toggle-switch.on { background: var(--text-primary); border-color: var(--text-primary); }
.toggle-switch.on::after { left: 20px; background: var(--bg-primary); }

/* ═══════════ CAMPAIGN CREATOR ═══════════ */
.creator-overlay {
  display: none; position: fixed; inset: 0;
  background: rgba(0,0,0,0.5); backdrop-filter: blur(12px);
  z-index: 200; align-items: center; justify-content: center;
}
.creator-overlay.show { display: flex; }
.creator-modal {
  background: var(--bg-secondary); border: 1px solid var(--border);
  border-radius: var(--radius-lg); width: 680px; max-height: 85vh;
  overflow-y: auto; box-shadow: 0 16px 64px rgba(0,0,0,0.4);
  animation: slideUp 0.2s ease;
}
@keyframes slideUp { from { transform: translateY(12px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
.creator-header {
  padding: 20px 24px; border-bottom: 1px solid var(--border);
  display: flex; justify-content: space-between; align-items: center;
}
.creator-header h2 { font-size: 16px; font-weight: 600; }
.creator-close {
  width: 28px; height: 28px; border-radius: 6px; border: none;
  background: var(--bg-elevated); color: var(--text-muted); font-size: 14px;
  cursor: pointer; display: flex; align-items: center; justify-content: center;
  transition: all var(--transition);
}
.creator-close:hover { background: var(--bg-card); color: var(--text-primary); }
.creator-body { padding: 24px; }
.form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.form-group { display: flex; flex-direction: column; gap: 5px; }
.form-group.full { grid-column: 1 / -1; }
.form-label { font-size: 12px; font-weight: 500; color: var(--text-secondary); }
.form-select, .form-input {
  padding: 9px 12px; border-radius: var(--radius-sm);
  background: var(--bg-card); border: 1px solid var(--border);
  color: var(--text-primary); font-family: var(--font);
  font-size: 13px; outline: none; transition: border-color var(--transition);
  -webkit-appearance: none;
}
.form-select:focus, .form-input:focus { border-color: var(--text-muted); }

.inspiration-toggle {
  grid-column: 1 / -1; display: flex; align-items: center;
  gap: 12px; padding: 14px 16px; background: var(--accent-glow);
  border: 1px solid var(--border); border-radius: var(--radius);
  cursor: pointer; transition: all var(--transition);
}
.inspiration-toggle:hover { border-color: var(--border-light); }
.toggle-switch {
  width: 40px; height: 22px; background: var(--bg-elevated);
  border-radius: 11px; position: relative; transition: background var(--transition);
  flex-shrink: 0;
}
.toggle-switch.on { background: var(--text-primary); }
.toggle-switch::after {
  content: ''; position: absolute; width: 16px; height: 16px;
  background: white; border-radius: 50%; top: 2px; left: 3px;
  transition: transform var(--transition);
}
.toggle-switch.on::after { transform: translateX(18px); }
.inspiration-text h4 { font-size: 13px; font-weight: 500; margin-bottom: 2px; }
.inspiration-text p { font-size: 12px; color: var(--text-muted); }

.creator-footer {
  padding: 16px 24px; border-top: 1px solid var(--border);
  display: flex; justify-content: flex-end; gap: 10px;
}

/* ═══════════ INSPIRATION PANEL ═══════════ */
.inspiration-panel {
  display: none; grid-column: 1 / -1;
  background: var(--bg-elevated); border-radius: var(--radius);
  border: 1px solid var(--border); padding: 20px;
  animation: fadeIn 0.2s ease;
}
.inspiration-panel.show { display: block; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
.inspi-header {
  display: flex; align-items: center; gap: 10px; margin-bottom: 16px;
}
.inspi-icon {
  width: 28px; height: 28px; border-radius: 7px;
  background: var(--bg-card); border: 1px solid var(--border);
  display: flex; align-items: center; justify-content: center; font-size: 14px;
}
.inspi-title { font-weight: 500; font-size: 14px; }
.inspi-sub { font-size: 12px; color: var(--text-muted); }

.inspi-suggestion {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius-sm); padding: 16px; margin-top: 12px;
}
.inspi-suggestion h5 { font-size: 13px; font-weight: 500; margin-bottom: 10px; color: var(--text-primary); }
.inspi-params {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;
}
.inspi-param {
  background: var(--bg-secondary); border-radius: 6px; padding: 8px 12px;
}
.inspi-param-label { font-size: 10px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; }
.inspi-param-value { font-size: 13px; font-weight: 600; margin-top: 2px; }
.inspi-reason {
  margin-top: 12px; padding: 12px; background: rgba(0, 214, 143, 0.05);
  border-left: 3px solid var(--success); border-radius: 0 6px 6px 0;
  font-size: 13px; color: var(--text-secondary); line-height: 1.5;
}
.inspi-actions { margin-top: 16px; display: flex; gap: 10px; }

/* ═══════════ LIVE PULSE ═══════════ */
.pulse-dot {
  width: 6px; height: 6px; border-radius: 50%;
  background: var(--success); display: inline-block;
  animation: pulse 2s infinite;
}
@keyframes pulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(52, 211, 153, 0.4); }
  50% { box-shadow: 0 0 0 4px rgba(52, 211, 153, 0); }
}

/* ═══════════ SCROLLBAR ═══════════ */
::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--border-light); }

/* ═══════════ REFINEMENT A/B ═══════════ */
.refine-overview {
  display: grid; grid-template-columns: 1fr 1fr; gap: 20px;
  margin-bottom: 28px;
}
.refine-stat-card {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 24px; text-align: center;
}
.refine-stat-value { font-size: 36px; font-weight: 700; margin-bottom: 4px; }
.refine-stat-label { font-size: 13px; color: var(--text-muted); }

.variant-card {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius-lg); overflow: hidden; margin-bottom: 16px;
  transition: all 0.3s;
}
.variant-card:hover { border-color: var(--border-light); }
.variant-card.winner { border-color: var(--success); }
.variant-card.testing { border-color: var(--warning); }

.variant-header {
  padding: 18px 24px; display: flex; align-items: center;
  justify-content: space-between; border-bottom: 1px solid var(--border);
}
.variant-name { font-weight: 600; font-size: 15px; display: flex; align-items: center; gap: 10px; }
.variant-badge {
  padding: 3px 10px; border-radius: 6px; font-size: 11px; font-weight: 600;
}
.variant-badge.winner { background: var(--success-bg); color: var(--success); }
.variant-badge.testing { background: var(--warning-bg); color: var(--warning); }
.variant-badge.control { background: var(--blue-bg); color: var(--blue); }

.variant-body { padding: 20px 24px; }
.variant-message {
  background: var(--bg-elevated); border-radius: 8px; padding: 16px;
  font-size: 13px; line-height: 1.7; color: var(--text-secondary);
  margin-bottom: 16px; border-left: 2px solid var(--border-light);
}
.variant-message .subject { color: var(--text-primary); font-weight: 600; margin-bottom: 8px; }

.variant-metrics {
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;
}
.variant-metric { text-align: center; padding: 12px; background: var(--bg-elevated); border-radius: 8px; }
.variant-metric-value { font-size: 20px; font-weight: 700; }
.variant-metric-label { font-size: 11px; color: var(--text-muted); margin-top: 2px; }

.refine-timeline {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius-lg); padding: 24px; margin-top: 24px;
}
.refine-timeline-title { font-weight: 600; font-size: 15px; margin-bottom: 20px; display: flex; align-items: center; gap: 8px; }

.timeline-item {
  display: flex; gap: 16px; padding: 12px 0;
  border-bottom: 1px solid var(--border);
}
.timeline-item:last-child { border-bottom: none; }
.timeline-dot {
  width: 10px; height: 10px; border-radius: 50%; margin-top: 5px; flex-shrink: 0;
}
.timeline-dot.green { background: var(--success); }
.timeline-dot.blue { background: var(--blue); }
.timeline-dot.orange { background: var(--warning); }
.timeline-dot.purple { background: var(--purple); }

.timeline-content { flex: 1; }
.timeline-action { font-size: 13px; font-weight: 500; margin-bottom: 2px; }
.timeline-detail { font-size: 12px; color: var(--text-muted); }
.timeline-date { font-size: 11px; color: var(--text-muted); white-space: nowrap; }

.learning-card {
  background: var(--bg-elevated); border-radius: 8px; padding: 14px;
  margin-top: 8px; border-left: 3px solid var(--purple);
}
.learning-card .label { font-size: 11px; font-weight: 600; color: var(--purple); margin-bottom: 4px; }
.learning-card .text { font-size: 12px; color: var(--text-secondary); line-height: 1.5; }

/* ═══════════ VARIABLE GENERATOR ═══════════ */
.vargen-card {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius-lg); margin-bottom: 24px;
  overflow: hidden;
}
.vargen-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 16px 20px; border-bottom: 1px solid var(--border);
  background: var(--bg-card);
}
.vargen-header-left { display: flex; align-items: center; gap: 14px; }
.vargen-header-icon {
  width: 36px; height: 36px; border-radius: 8px;
  background: var(--bg-elevated); border: 1px solid var(--border);
  display: flex; align-items: center; justify-content: center;
  font-size: 16px; flex-shrink: 0;
}
.vargen-header-title { font-size: 14px; font-weight: 600; }
.vargen-header-subtitle { font-size: 12px; color: var(--text-muted); margin-top: 2px; }

.vargen-context {
  display: flex; align-items: center; gap: 10px; flex-wrap: wrap;
  padding: 16px 24px; border-bottom: 1px solid var(--border);
  background: var(--bg-secondary);
}
.vargen-context-label {
  font-size: 11px; font-weight: 600; color: var(--text-muted);
  text-transform: uppercase; letter-spacing: 0.5px;
}
.vargen-context-tag {
  padding: 4px 12px; border-radius: 6px; font-size: 12px; font-weight: 500;
  background: var(--bg-elevated); color: var(--text-secondary);
  border: 1px solid var(--border);
}
.vargen-context-tag.highlight {
  background: var(--accent-glow); color: var(--text-primary);
  border-color: var(--border-light);
}

.vargen-body { padding: 24px; }

.vargen-explanation {
  background: var(--bg-elevated); border-radius: var(--radius);
  padding: 16px 18px; margin-bottom: 20px;
  border-left: 2px solid var(--border-light);
}
.vargen-explanation-title {
  font-size: 12px; font-weight: 600; color: var(--text-secondary);
  margin-bottom: 6px; display: flex; align-items: center; gap: 8px;
}
.vargen-explanation-text {
  font-size: 13px; color: var(--text-secondary); line-height: 1.7;
}

.vargen-chain {
  display: flex; flex-direction: column; gap: 0;
  margin-bottom: 24px;
}
.vargen-chain-label {
  font-size: 11px; font-weight: 700; color: var(--text-muted);
  text-transform: uppercase; letter-spacing: 1px;
  margin-bottom: 12px;
}

.vargen-var {
  background: var(--bg-elevated); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 18px 20px;
  transition: all 0.2s; position: relative;
}
.vargen-var:hover { border-color: var(--accent); }
.vargen-var + .vargen-connector {
  display: flex; align-items: center; justify-content: center;
  padding: 6px 0;
}
.vargen-connector-arrow {
  width: 2px; height: 24px; background: var(--border);
  position: relative;
}
.vargen-connector-arrow::after {
  content: '▼'; position: absolute; bottom: -6px; left: 50%;
  transform: translateX(-50%); font-size: 8px; color: var(--accent-light);
}
.vargen-var.derived {
  border-color: var(--border-light); background: var(--accent-glow);
}

.vargen-var-header {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 10px;
}
.vargen-var-name {
  display: flex; align-items: center; gap: 10px;
}
.vargen-var-tag {
  font-family: var(--font-mono);
  font-size: 12px; font-weight: 500;
  color: var(--text-primary); background: var(--accent-glow);
  padding: 3px 10px; border-radius: 5px; border: 1px solid var(--border);
}
.vargen-var-type {
  font-size: 10px; font-weight: 700; text-transform: uppercase;
  letter-spacing: 0.5px; padding: 3px 8px; border-radius: 4px;
}
.vargen-var-type.base { background: var(--blue-bg); color: var(--blue); }
.vargen-var-type.derived { background: var(--accent-glow); color: var(--accent-light); }
.vargen-var-type.enrichment { background: var(--warning-bg); color: var(--warning); }

.vargen-var-actions { display: flex; gap: 6px; }

.vargen-var-desc {
  font-size: 13px; color: var(--text-secondary); line-height: 1.5;
  margin-bottom: 10px;
}
.vargen-var-source {
  display: flex; align-items: center; gap: 6px;
  font-size: 11px; color: var(--text-muted);
}
.vargen-var-source-icon {
  width: 16px; height: 16px; border-radius: 4px;
  display: flex; align-items: center; justify-content: center;
  font-size: 9px; background: var(--bg-card);
}

/* Formula editor for derived variables */
.vargen-formula {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius-sm); padding: 14px 16px;
  margin-top: 12px;
}
.vargen-formula-label {
  font-size: 10px; font-weight: 700; color: var(--accent-light);
  text-transform: uppercase; letter-spacing: 0.5px;
  margin-bottom: 8px; display: flex; align-items: center; gap: 6px;
}
.vargen-formula-inputs {
  display: flex; align-items: center; gap: 8px; flex-wrap: wrap;
  margin-bottom: 10px;
}
.vargen-formula-input-tag {
  font-family: 'JetBrains Mono', monospace;
  font-size: 11px; color: var(--blue); background: var(--blue-bg);
  padding: 3px 8px; border-radius: 4px; border: 1px solid rgba(51,154,240,0.2);
}
.vargen-formula-operator {
  font-size: 14px; color: var(--text-muted); font-weight: 600;
}
.vargen-formula-prompt {
  width: 100%; padding: 10px 14px; border-radius: var(--radius-sm);
  background: var(--bg-elevated); border: 1px solid var(--border);
  color: var(--text-primary); font-size: 13px; line-height: 1.5;
  font-family: var(--font); resize: vertical; min-height: 60px;
  transition: border-color var(--transition);
}
.vargen-formula-prompt:focus { outline: none; border-color: var(--text-muted); }

/* AI Preview */
.vargen-preview {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius-sm); margin-top: 12px; overflow: hidden;
}
.vargen-preview-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 10px 14px; border-bottom: 1px solid var(--border);
  background: var(--bg-secondary);
}
.vargen-preview-title {
  font-size: 11px; font-weight: 600; color: var(--text-muted);
  display: flex; align-items: center; gap: 6px;
}
.vargen-preview-body { padding: 14px 16px; }
.vargen-preview-example {
  display: flex; gap: 12px; padding: 8px 0;
  border-bottom: 1px solid var(--border);
  font-size: 12px;
}
.vargen-preview-example:last-child { border-bottom: none; }
.vargen-preview-prospect {
  font-weight: 600; color: var(--text-primary);
  min-width: 120px; flex-shrink: 0;
}
.vargen-preview-value {
  color: var(--text-secondary); line-height: 1.5;
}
.vargen-preview-value em {
  color: var(--text-primary); font-style: normal;
  background: var(--accent-glow); padding: 1px 4px; border-radius: 3px;
}

/* Bottom actions */
.vargen-actions {
  display: flex; justify-content: space-between; align-items: center;
  padding-top: 20px; border-top: 1px solid var(--border);
  margin-top: 8px;
}
.vargen-actions-info {
  font-size: 12px; color: var(--text-muted);
  display: flex; align-items: center; gap: 6px;
}

/* ═══════════ CAMPAIGNS DETAIL ═══════════ */
.campaigns-list { display: flex; flex-direction: column; gap: 12px; }

.campaign-row {
  display: grid; grid-template-columns: 2fr 1fr 1fr 1fr 1fr auto;
  align-items: center; gap: 16px;
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 16px 20px;
  cursor: pointer; transition: all var(--transition);
}
.campaign-row:hover { border-color: var(--border-light); background: var(--bg-card-hover); }
.campaign-row-name { font-weight: 500; font-size: 14px; }
.campaign-row-meta { font-size: 12px; color: var(--text-muted); margin-top: 4px; }
.campaign-row-channel { font-size: 13px; font-weight: 500; }
.campaign-row-stat { text-align: center; }
.campaign-row-stat-value { font-size: 18px; font-weight: 700; }
.campaign-row-stat-label { font-size: 11px; color: var(--text-muted); margin-top: 2px; }
.campaign-row-arrow { font-size: 16px; color: var(--text-muted); transition: color var(--transition); }
.campaign-row:hover .campaign-row-arrow { color: var(--text-secondary); }

/* Campaign detail view */
.campaign-detail { animation: fadeIn 0.3s ease; }
.campaign-detail-back {
  display: inline-flex; align-items: center; gap: 6px;
  font-size: 13px; font-weight: 500; color: var(--text-muted);
  cursor: pointer; transition: color var(--transition); margin-bottom: 16px;
  background: none; border: none; font-family: var(--font);
}
.campaign-detail-back:hover { color: var(--text-primary); }

.campaign-detail-header {
  display: flex; justify-content: space-between; align-items: flex-start;
  margin-bottom: 28px;
}
.campaign-detail-title { font-size: 20px; font-weight: 600; letter-spacing: -0.3px; }
.campaign-detail-tags { display: flex; gap: 8px; margin-top: 10px; flex-wrap: wrap; }
.campaign-tag {
  padding: 4px 12px; border-radius: 6px; font-size: 12px; font-weight: 500;
  background: var(--bg-elevated); color: var(--text-secondary); border: 1px solid var(--border);
}

.campaign-kpis {
  display: grid; grid-template-columns: repeat(5, 1fr); gap: 14px;
  margin-bottom: 28px;
}
.campaign-kpi {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 18px; text-align: center;
}
.campaign-kpi-value { font-size: 24px; font-weight: 700; }
.campaign-kpi-label { font-size: 11px; color: var(--text-muted); margin-top: 4px; }
.campaign-kpi-bar {
  width: 100%; height: 4px; background: var(--bg-elevated);
  border-radius: 2px; margin-top: 10px; overflow: hidden;
}
.campaign-kpi-fill { height: 100%; border-radius: 2px; }

/* Sequence timeline */
.sequence-card {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius-lg); margin-bottom: 24px;
}
.sequence-header {
  padding: 20px 24px; border-bottom: 1px solid var(--border);
  display: flex; justify-content: space-between; align-items: center;
}
.sequence-title { font-size: 15px; font-weight: 600; display: flex; align-items: center; gap: 8px; }

.sequence-steps { padding: 0; }
.sequence-step {
  display: grid; grid-template-columns: 60px 1fr 120px 120px 120px;
  align-items: center; gap: 16px;
  padding: 16px 24px;
  border-bottom: 1px solid var(--border);
  transition: background 0.2s;
}
.sequence-step:last-child { border-bottom: none; }
.sequence-step:hover { background: var(--accent-glow); }

.step-indicator {
  display: flex; flex-direction: column; align-items: center; gap: 4px;
}
.step-dot {
  width: 32px; height: 32px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 12px; font-weight: 700; color: white;
}
.step-dot.email { background: var(--blue); }
.step-dot.linkedin { background: var(--purple); }
.step-label { font-size: 10px; color: var(--text-muted); font-weight: 600; }

.step-content { }
.step-type { font-size: 13px; font-weight: 600; margin-bottom: 4px; }
.step-preview {
  font-size: 12px; color: var(--text-muted); line-height: 1.5;
  display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
}
.step-subject { font-size: 12px; color: var(--accent-light); margin-bottom: 2px; font-weight: 500; }

.step-stat { text-align: center; }
.step-stat-value { font-size: 16px; font-weight: 700; }
.step-stat-label { font-size: 10px; color: var(--text-muted); margin-top: 2px; }
.step-stat-bar {
  width: 100%; height: 3px; background: var(--bg-elevated);
  border-radius: 2px; margin-top: 6px; overflow: hidden;
}
.step-stat-fill { height: 100%; border-radius: 2px; }

/* Modification history */
.mod-history { display: flex; flex-direction: column; gap: 12px; }
.mod-item {
  display: flex; gap: 16px; padding: 14px 0;
  border-bottom: 1px solid var(--border);
}
.mod-item:last-child { border-bottom: none; }
.mod-version {
  width: 36px; height: 36px; border-radius: 50%;
  background: var(--bg-elevated); border: 2px solid var(--accent);
  display: flex; align-items: center; justify-content: center;
  font-size: 12px; font-weight: 700; color: var(--accent-light); flex-shrink: 0;
}
.mod-content { flex: 1; }
.mod-title { font-size: 14px; font-weight: 600; margin-bottom: 4px; }
.mod-desc { font-size: 12px; color: var(--text-muted); line-height: 1.5; }
.mod-result {
  display: inline-flex; align-items: center; gap: 4px;
  padding: 2px 8px; border-radius: 4px; font-size: 11px; font-weight: 600; margin-top: 6px;
}
.mod-result.improved { background: var(--success-bg); color: var(--success); }
.mod-result.testing { background: var(--warning-bg); color: var(--warning); }
.mod-result.neutral { background: var(--blue-bg); color: var(--blue); }
.mod-date { font-size: 11px; color: var(--text-muted); white-space: nowrap; }

/* ═══════════ COPY EDITOR ═══════════ */
.editor-layout {
  display: grid; grid-template-columns: 260px 1fr; gap: 0; min-height: calc(100vh - 160px);
}
.editor-sidebar {
  border-right: 1px solid var(--border); padding: 20px 0;
  background: var(--bg-secondary); border-radius: var(--radius-lg) 0 0 var(--radius-lg);
  overflow-y: auto;
}
.editor-sidebar-title {
  font-size: 11px; font-weight: 600; color: var(--text-muted);
  text-transform: uppercase; letter-spacing: 1px;
  padding: 0 20px; margin-bottom: 12px;
}
.editor-campaign-item {
  display: flex; align-items: center; gap: 12px;
  padding: 12px 20px; cursor: pointer; transition: all 0.2s;
  border-left: 3px solid transparent;
}
.editor-campaign-item:hover { background: var(--bg-card); }
.editor-campaign-item.active {
  background: var(--accent-glow); border-left-color: var(--text-primary);
}
.editor-campaign-item .eci-icon {
  width: 32px; height: 32px; border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-size: 14px; flex-shrink: 0;
}
.editor-campaign-item .eci-name { font-size: 14px; font-weight: 600; }
.editor-campaign-item .eci-meta { font-size: 11px; color: var(--text-muted); margin-top: 2px; }
.editor-campaign-item.active .eci-name { color: var(--text-primary); }

.editor-main {
  padding: 28px; overflow-y: auto;
  background: var(--bg-primary); border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
}
.editor-header {
  display: flex; justify-content: space-between; align-items: flex-start;
  margin-bottom: 24px; padding-bottom: 20px; border-bottom: 1px solid var(--border);
}
.editor-header-title { font-size: 18px; font-weight: 600; letter-spacing: -0.3px; }
.editor-header-params {
  display: flex; gap: 8px; margin-top: 8px; flex-wrap: wrap;
}
.editor-param {
  padding: 3px 10px; border-radius: 6px; font-size: 11px; font-weight: 500;
  background: var(--bg-elevated); color: var(--text-secondary); border: 1px solid var(--border);
}

.ai-bar {
  background: var(--accent-glow); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 12px 16px; margin-bottom: 20px;
  display: flex; align-items: center; gap: 12px;
}
.ai-bar-icon {
  width: 32px; height: 32px; border-radius: 8px;
  background: var(--bg-elevated); border: 1px solid var(--border);
  display: flex; align-items: center; justify-content: center;
  font-size: 14px; flex-shrink: 0;
}
.ai-bar-content { flex: 1; }
.ai-bar-title { font-size: 13px; font-weight: 500; color: var(--text-primary); }
.ai-bar-text { font-size: 12px; color: var(--text-secondary); margin-top: 2px; }

.touchpoint-card {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius-lg); margin-bottom: 16px;
  transition: all 0.2s; overflow: hidden;
}
.touchpoint-card:hover { border-color: var(--border-light); }
.touchpoint-card.editing { border-color: var(--border-light); }

.tp-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 16px 20px; border-bottom: 1px solid var(--border);
}
.tp-header-left { display: flex; align-items: center; gap: 12px; }
.tp-dot {
  width: 36px; height: 36px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 13px; font-weight: 700; color: white;
}
.tp-dot.email { background: var(--blue); }
.tp-dot.linkedin { background: var(--purple); }
.tp-info { }
.tp-name { font-size: 14px; font-weight: 600; }
.tp-timing { font-size: 12px; color: var(--text-muted); }
.tp-actions { display: flex; gap: 6px; }
.tp-action {
  padding: 6px 10px; border-radius: 6px; font-size: 11px; font-weight: 600;
  background: var(--bg-elevated); color: var(--text-secondary); border: 1px solid var(--border);
  cursor: pointer; transition: all var(--transition); font-family: var(--font);
}
.tp-action:hover { border-color: var(--accent); color: var(--accent-light); }
.tp-action.ai { background: var(--accent-glow); color: var(--text-primary); border-color: var(--border-light); }

.tp-body { padding: 20px; }
.tp-field { margin-bottom: 16px; }
.tp-field:last-child { margin-bottom: 0; }
.tp-field-label {
  font-size: 11px; font-weight: 600; color: var(--text-muted);
  text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;
  display: flex; align-items: center; justify-content: space-between;
}
.tp-field-count { font-size: 11px; font-weight: 500; color: var(--text-muted); text-transform: none; letter-spacing: 0; }
.tp-field-count.warn { color: var(--warning); }
.tp-field-count.over { color: var(--danger); }

.tp-editable {
  background: var(--bg-elevated); border: 1px solid var(--border);
  border-radius: 8px; padding: 12px 16px;
  font-size: 13px; line-height: 1.6; color: var(--text-primary);
  cursor: text; transition: all var(--transition); min-height: 24px;
  font-family: var(--font);
}
.tp-editable:hover { border-color: var(--border-light); }
.tp-editable:focus { outline: none; border-color: var(--text-muted); background: var(--bg-card); }
.tp-editable[contenteditable="true"]:focus { box-shadow: 0 0 0 2px var(--accent-glow); }
.tp-editable .var {
  background: var(--accent-glow); color: var(--text-primary);
  padding: 1px 6px; border-radius: 4px; font-family: var(--font-mono);
  font-size: 12px; font-weight: 500; border: 1px solid var(--border);
}

.tp-subject .tp-editable { font-weight: 600; }

.tp-ai-suggestion {
  background: var(--bg-elevated); border-left: 2px solid var(--text-muted);
  border-radius: 0 8px 8px 0; padding: 12px 16px; margin-top: 12px;
}
.tp-ai-suggestion-label { font-size: 11px; font-weight: 600; color: var(--text-secondary); margin-bottom: 4px; }
.tp-ai-suggestion-text { font-size: 12px; color: var(--text-secondary); line-height: 1.5; }

.editor-bottom-bar {
  display: flex; justify-content: space-between; align-items: center;
  padding: 20px 0; margin-top: 8px; border-top: 1px solid var(--border);
}
.editor-bottom-info { font-size: 12px; color: var(--text-muted); }

/* ═══════════ LAUNCH BAR ═══════════ */
.editor-launch-bar {
  display: flex; align-items: center; justify-content: space-between;
  padding: 16px 20px; margin-bottom: 16px;
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius);
}
.editor-launch-info { flex: 1; }
.btn-launch {
  background: var(--text-primary); color: var(--bg-primary);
  border: none; border-radius: var(--radius-sm);
  padding: 10px 24px; font-size: 13px; font-weight: 600;
  font-family: var(--font); cursor: pointer;
  letter-spacing: -0.2px;
  transition: opacity var(--transition);
}
.btn-launch:hover { opacity: 0.85; }
.btn-launch:disabled { opacity: 0.5; cursor: default; }

/* ═══════════ VARIABLE MANAGER ═══════════ */
.var-panel {
  border-top: 1px solid var(--border);
  margin-top: 16px; padding-top: 16px;
}
.var-panel-toggle {
  display: flex; align-items: center; justify-content: space-between;
  cursor: pointer; padding: 8px 12px; border-radius: var(--radius-sm);
  transition: background 0.2s;
}
.var-panel-toggle:hover { background: var(--bg-card); }
.var-panel-toggle-left {
  display: flex; align-items: center; gap: 8px;
  font-size: 13px; font-weight: 600; color: var(--text-primary);
}
.var-panel-toggle .chevron {
  font-size: 10px; color: var(--text-muted);
  transition: transform 0.2s;
}
.var-panel-toggle.open .chevron { transform: rotate(90deg); }
.var-panel-count {
  font-size: 10px; font-weight: 500; color: var(--text-secondary);
  background: var(--accent-glow); padding: 2px 7px; border-radius: 6px;
  border: 1px solid var(--border);
}

.var-panel-body {
  max-height: 0; overflow: hidden;
  transition: max-height 0.3s ease;
}
.var-panel-body.open { max-height: 600px; overflow-y: auto; }

.var-group { margin-top: 12px; }
.var-group-label {
  font-size: 10px; font-weight: 600; color: var(--text-muted);
  text-transform: uppercase; letter-spacing: 1px;
  padding: 0 12px; margin-bottom: 6px;
}
.var-list { display: flex; flex-direction: column; gap: 2px; }

.var-item {
  display: flex; align-items: center; gap: 8px;
  padding: 7px 12px; border-radius: 6px;
  cursor: pointer; transition: all 0.15s;
  position: relative;
}
.var-item:hover { background: var(--bg-card); }
.var-item-tag {
  font-family: var(--font-mono);
  font-size: 11px; font-weight: 500;
  color: var(--text-primary); background: var(--accent-glow);
  padding: 2px 8px; border-radius: 4px;
  white-space: nowrap; border: 1px solid var(--border);
}
.var-item-label {
  font-size: 11px; color: var(--text-secondary);
  flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}
.var-item-sync {
  width: 16px; height: 16px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 8px; flex-shrink: 0;
}
.var-item-sync.synced { background: var(--success-bg); color: var(--success); }
.var-item-sync.custom { background: var(--warning-bg); color: var(--warning); }
.var-item-sync.local { background: var(--bg-elevated); color: var(--text-muted); }

.var-item-tooltip {
  display: none; position: absolute; left: 100%; top: 50%; transform: translateY(-50%);
  margin-left: 8px; padding: 6px 10px; border-radius: 6px;
  background: var(--bg-elevated); border: 1px solid var(--border);
  font-size: 11px; color: var(--text-secondary); white-space: nowrap;
  z-index: 200; box-shadow: var(--shadow);
}
.var-item:hover .var-item-tooltip { display: block; }

.var-add-btn {
  display: flex; align-items: center; justify-content: center; gap: 6px;
  width: 100%; padding: 8px 12px; margin-top: 10px;
  background: transparent; border: 1px dashed var(--border);
  border-radius: 6px; color: var(--text-muted); font-size: 12px;
  font-family: var(--font); cursor: pointer; transition: all var(--transition);
}
.var-add-btn:hover {
  border-color: var(--border-light); color: var(--text-secondary);
  background: var(--accent-glow);
}

/* Variable insert toolbar (appears above touchpoint body when editing) */
.var-insert-bar {
  display: none; flex-wrap: wrap; gap: 4px;
  padding: 8px 0; margin-bottom: 4px;
}
.touchpoint-card.editing .var-insert-bar { display: flex; }
.var-insert-chip {
  font-family: var(--font-mono);
  font-size: 10px; font-weight: 500;
  color: var(--text-secondary); background: var(--accent-glow);
  padding: 3px 8px; border-radius: 4px; border: 1px solid var(--border);
  cursor: pointer; transition: all var(--transition);
  white-space: nowrap;
}
.var-insert-chip:hover {
  background: var(--bg-elevated); border-color: var(--border-light); color: var(--text-primary);
}

/* Custom variable modal */
.var-modal-overlay {
  display: none; position: fixed; inset: 0;
  background: rgba(0,0,0,0.5); backdrop-filter: blur(8px);
  z-index: 1000; align-items: center; justify-content: center;
}
.var-modal-overlay.show { display: flex; }
.var-modal {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius-lg); padding: 24px;
  width: 460px; max-width: 90vw; box-shadow: var(--shadow);
}
.var-modal-title {
  font-size: 16px; font-weight: 600; margin-bottom: 4px;
}
.var-modal-subtitle {
  font-size: 13px; color: var(--text-muted); margin-bottom: 24px;
}
.var-modal-field { margin-bottom: 16px; }
.var-modal-field label {
  display: block; font-size: 12px; font-weight: 600;
  color: var(--text-secondary); margin-bottom: 6px;
}
.var-modal-field input,
.var-modal-field select {
  width: 100%; padding: 9px 12px; border-radius: var(--radius-sm);
  background: var(--bg-elevated); border: 1px solid var(--border);
  color: var(--text-primary); font-size: 13px;
  font-family: var(--font); transition: border-color var(--transition);
}
.var-modal-field input:focus,
.var-modal-field select:focus {
  outline: none; border-color: var(--text-muted);
}
.var-modal-field input::placeholder { color: var(--text-muted); }
.var-modal-field .field-hint {
  font-size: 11px; color: var(--text-muted); margin-top: 4px;
}
.var-modal-preview {
  background: var(--bg-elevated); border: 1px solid var(--border);
  border-radius: var(--radius-sm); padding: 12px 16px;
  margin-bottom: 20px; display: flex; align-items: center; gap: 10px;
}
.var-modal-preview-label {
  font-size: 11px; color: var(--text-muted); white-space: nowrap;
}
.var-modal-preview-tag {
  font-family: var(--font-mono);
  font-size: 12px; font-weight: 500;
  color: var(--text-primary); background: var(--accent-glow);
  padding: 3px 10px; border-radius: 4px; border: 1px solid var(--border);
}
.var-modal-actions {
  display: flex; justify-content: flex-end; gap: 10px;
  padding-top: 8px; border-top: 1px solid var(--border);
}

.var-item-actions {
  display: none; gap: 4px;
}
.var-item:hover .var-item-actions { display: flex; }
.var-item-action-btn {
  background: none; border: none; color: var(--text-muted);
  font-size: 10px; cursor: pointer; padding: 2px 4px; border-radius: 4px;
  transition: all 0.15s;
}
.var-item-action-btn:hover { color: var(--danger); background: var(--danger-bg); }

/* ═══════════ RECOMMANDATIONS IA ═══════════ */
.reco-page-header {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 28px;
}
.reco-page-title { font-size: 22px; font-weight: 600; letter-spacing: -0.3px; }
.reco-page-subtitle { color: var(--text-secondary); font-size: 14px; margin-top: 4px; }

.reco-stats {
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px;
  margin-bottom: 28px;
}
.reco-stat-card {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 20px; text-align: center;
}
.reco-stat-value { font-size: 24px; font-weight: 600; letter-spacing: -0.5px; }
.reco-stat-label { font-size: 12px; color: var(--text-muted); margin-top: 4px; }
.reco-stat-trend { font-size: 12px; margin-top: 6px; }
.reco-stat-trend.up { color: var(--success); }

.reco-filters {
  display: flex; gap: 10px; margin-bottom: 24px; flex-wrap: wrap;
}
.reco-filter {
  padding: 6px 14px; border-radius: 6px; font-size: 13px; font-weight: 450;
  background: transparent; color: var(--text-secondary); border: 1px solid var(--border);
  cursor: pointer; transition: all var(--transition); font-family: var(--font);
}
.reco-filter:hover { border-color: var(--border-light); color: var(--text-primary); }
.reco-filter.active { background: var(--accent-glow); color: var(--text-primary); border-color: var(--border-light); }
.reco-filter .count {
  display: inline-block; margin-left: 6px; font-size: 10px; font-weight: 500;
  background: var(--bg-elevated); padding: 1px 7px; border-radius: 8px;
}
.reco-filter.active .count { background: var(--bg-elevated); }

.reco-list { display: flex; flex-direction: column; gap: 16px; }

.reco-card {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius-lg); overflow: hidden;
  transition: all 0.2s;
}
.reco-card:hover { border-color: var(--border-light); }
.reco-card.priority-critical { border-left: 4px solid var(--danger); }
.reco-card.priority-important { border-left: 4px solid var(--warning); }
.reco-card.priority-suggestion { border-left: 4px solid var(--blue); }
.reco-card.priority-applied { border-left: 4px solid var(--success); opacity: 0.7; }

.reco-card-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 18px 24px; border-bottom: 1px solid var(--border);
}
.reco-card-left { display: flex; align-items: center; gap: 14px; }
.reco-priority-badge {
  padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 700;
  text-transform: uppercase; letter-spacing: 0.3px;
}
.reco-priority-badge.critical { background: var(--danger-bg); color: var(--danger); }
.reco-priority-badge.important { background: var(--warning-bg); color: var(--warning); }
.reco-priority-badge.suggestion { background: var(--blue-bg); color: var(--blue); }
.reco-priority-badge.applied { background: var(--success-bg); color: var(--success); }

.reco-card-campaign { font-size: 14px; font-weight: 600; }
.reco-card-step { font-size: 12px; color: var(--text-muted); margin-top: 2px; }
.reco-card-meta { display: flex; align-items: center; gap: 12px; }
.reco-card-date { font-size: 11px; color: var(--text-muted); }
.reco-impact-badge {
  padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 600;
  background: var(--success-bg); color: var(--success);
}

.reco-card-body { padding: 20px 24px; }
.reco-card-title { font-size: 15px; font-weight: 600; margin-bottom: 10px; }
.reco-card-desc { font-size: 13px; color: var(--text-secondary); line-height: 1.6; margin-bottom: 16px; }

.reco-diff {
  display: grid; grid-template-columns: 1fr 1fr; gap: 16px;
  margin-bottom: 16px;
}
.reco-diff-panel {
  background: var(--bg-elevated); border-radius: 8px; padding: 14px 16px;
}
.reco-diff-label {
  font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px;
  margin-bottom: 8px; display: flex; align-items: center; gap: 6px;
}
.reco-diff-label.before { color: var(--danger); }
.reco-diff-label.after { color: var(--success); }
.reco-diff-text {
  font-size: 13px; line-height: 1.6; color: var(--text-secondary);
}
.reco-diff-text .highlight {
  background: rgba(0,214,143,0.15); padding: 1px 4px; border-radius: 3px;
  color: var(--success);
}
.reco-diff-text .strikethrough {
  text-decoration: line-through; color: var(--text-muted); opacity: 0.6;
}

.reco-card-actions {
  display: flex; gap: 8px; padding-top: 4px;
}
.reco-btn {
  padding: 7px 14px; border-radius: var(--radius-sm);
  font-family: var(--font); font-size: 12px; font-weight: 500;
  cursor: pointer; transition: all var(--transition); border: 1px solid var(--border);
  display: flex; align-items: center; gap: 6px;
}
.reco-btn.accept { background: var(--success); color: #0c0c0e; border-color: var(--success); }
.reco-btn.accept:hover { opacity: 0.85; }
.reco-btn.modify { background: var(--bg-elevated); color: var(--text-primary); border-color: var(--border-light); }
.reco-btn.modify:hover { background: var(--accent-glow); }
.reco-btn.dismiss { background: var(--bg-elevated); color: var(--text-muted); }
.reco-btn.dismiss:hover { color: var(--danger); border-color: var(--danger); }

.reco-applied-note {
  display: flex; align-items: center; gap: 8px;
  font-size: 12px; color: var(--success); font-weight: 500;
}

.reco-insight-card {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius-lg); padding: 24px; margin-top: 28px;
}
.reco-insight-title {
  font-size: 15px; font-weight: 600; margin-bottom: 16px;
  display: flex; align-items: center; gap: 8px;
}
.reco-insight-grid {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;
}
.reco-insight-item {
  background: var(--bg-elevated); border-radius: 8px; padding: 16px;
  border-left: 3px solid var(--purple);
}
.reco-insight-item-title { font-size: 13px; font-weight: 600; margin-bottom: 6px; }
.reco-insight-item-text { font-size: 12px; color: var(--text-secondary); line-height: 1.5; }
.reco-insight-item-confidence {
  font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;
  margin-top: 8px; color: var(--text-muted);
}
.reco-insight-item-confidence.high { color: var(--success); }
.reco-insight-item-confidence.medium { color: var(--warning); }

/* ═══════════ EMPTY STATES / ONBOARDING ═══════════ */
.empty-state {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  text-align: center; padding: 60px 40px;
}
.empty-state-icon {
  font-size: 36px; margin-bottom: 20px;
  width: 64px; height: 64px;
  display: flex; align-items: center; justify-content: center;
  background: var(--accent-glow); border-radius: 16px; border: 1px solid var(--border);
}
.empty-state-title {
  font-size: 18px; font-weight: 600; margin-bottom: 8px;
  color: var(--text-primary);
}
.empty-state-desc {
  font-size: 14px; color: var(--text-secondary); line-height: 1.6;
  max-width: 440px; margin-bottom: 24px;
}
.empty-state .btn { font-size: 15px; padding: 12px 28px; }

/* Welcome banner (top of overview for new users) */
.welcome-banner {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg); padding: 32px 36px;
  margin-bottom: 24px; position: relative; overflow: hidden;
}
.welcome-banner::before {
  content: ''; position: absolute; top: -40px; right: -40px;
  width: 160px; height: 160px;
  background: radial-gradient(circle, var(--accent-glow), transparent 70%);
  border-radius: 50%;
}
.welcome-title {
  font-size: 20px; font-weight: 600; margin-bottom: 6px;
  color: var(--text-primary);
}
.welcome-subtitle {
  font-size: 14px; color: var(--text-secondary); margin-bottom: 28px; line-height: 1.6;
}

/* Onboarding steps */
.onboarding-steps {
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px;
}
.onboarding-step {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 20px;
  position: relative; transition: all 0.2s;
}
.onboarding-step:hover { border-color: var(--border-light); background: var(--bg-card-hover); }
.onboarding-step.step-done { opacity: 0.5; }
.onboarding-step.step-active { border-color: var(--border-light); }
.onboarding-step-number {
  width: 24px; height: 24px; border-radius: 50%;
  background: var(--bg-elevated); border: 1.5px solid var(--border);
  display: flex; align-items: center; justify-content: center;
  font-size: 11px; font-weight: 600; color: var(--text-muted);
  margin-bottom: 12px;
}
.onboarding-step.step-active .onboarding-step-number {
  background: var(--text-primary); border-color: var(--text-primary); color: var(--bg-primary);
}
.onboarding-step.step-done .onboarding-step-number {
  background: var(--success); border-color: var(--success); color: white;
}
.onboarding-step-title {
  font-size: 13px; font-weight: 600; margin-bottom: 4px; color: var(--text-primary);
}
.onboarding-step-desc {
  font-size: 12px; color: var(--text-muted); line-height: 1.5;
}
.onboarding-step .btn {
  margin-top: 12px; font-size: 12px; padding: 6px 14px;
}

/* Empty card variant */
.card-empty .card-body {
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; padding: 40px 24px; text-align: center;
  min-height: 200px;
}
.card-empty .empty-icon { font-size: 32px; margin-bottom: 12px; }
.card-empty .empty-text {
  font-size: 13px; color: var(--text-muted); line-height: 1.5; max-width: 280px;
}

/* Demo toggle switch */
.demo-toggle {
  position: fixed; bottom: 16px; right: 16px;
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 8px 14px;
  display: flex; align-items: center; gap: 8px;
  z-index: 999; font-size: 11px; color: var(--text-secondary);
  box-shadow: var(--shadow-sm); cursor: pointer; transition: all var(--transition);
}
.demo-toggle:hover { border-color: var(--border-light); }
.demo-toggle-switch {
  width: 36px; height: 20px; border-radius: 10px;
  background: var(--bg-elevated); border: 1px solid var(--border);
  position: relative; transition: all 0.2s;
}
.demo-toggle-switch::after {
  content: ''; position: absolute; top: 2px; left: 2px;
  width: 14px; height: 14px; border-radius: 50%;
  background: var(--text-muted); transition: all 0.2s;
}
.demo-toggle.active .demo-toggle-switch {
  background: var(--text-primary); border-color: var(--text-primary);
}
.demo-toggle.active .demo-toggle-switch::after {
  transform: translateX(16px); background: white;
}

@media (max-width: 900px) {
  .onboarding-steps { grid-template-columns: repeat(2, 1fr); }
}

/* ═══════════ CHAT PAGE ═══════════ */
.chat-page { display:flex; height:calc(100vh - 24px); gap:0; }

/* ── Thread sidebar ── */
.chat-threads {
  width: 240px; min-width: 240px; background: var(--bg-secondary);
  border-right: 1px solid var(--border); display: flex; flex-direction: column;
  border-radius: var(--radius-lg) 0 0 var(--radius-lg);
}
.chat-threads-header {
  padding: 16px 16px 12px; display: flex; justify-content: space-between; align-items: center;
  border-bottom: 1px solid var(--border);
}
.chat-threads-title { font-size: 13px; font-weight: 500; color: var(--text-secondary); }
.chat-new-btn {
  width: 28px; height: 28px; border-radius: 7px; border: 1px solid var(--border);
  background: transparent; color: var(--text-muted); cursor: pointer; font-size: 14px;
  display: flex; align-items: center; justify-content: center; transition: all var(--transition);
}
.chat-new-btn:hover { background: var(--text-primary); color: var(--bg-primary); border-color: var(--text-primary); }
.chat-thread-list { flex: 1; overflow-y: auto; padding: 6px; }
.chat-thread-item {
  padding: 8px 10px; border-radius: 7px; cursor: pointer; margin-bottom: 1px;
  transition: background var(--transition); display: flex; justify-content: space-between; align-items: center;
  border: 1px solid transparent;
}
.chat-thread-item:hover { background: var(--accent-glow); }
.chat-thread-item.active { background: var(--accent-glow); border-color: var(--border); }
.chat-thread-item .thread-title {
  font-size: 13px; color: var(--text-secondary); white-space: nowrap;
  overflow: hidden; text-overflow: ellipsis; flex: 1;
}
.chat-thread-item.active .thread-title { color: var(--text-primary); font-weight: 500; }
.chat-thread-item .thread-date { font-size: 10px; color: var(--text-muted); margin-left: 8px; white-space: nowrap; }
.chat-thread-delete {
  opacity: 0; background: none; border: none; color: var(--text-muted); cursor: pointer;
  font-size: 11px; padding: 2px 4px; transition: opacity var(--transition);
}
.chat-thread-item:hover .chat-thread-delete { opacity: 1; }
.chat-thread-delete:hover { color: var(--danger); }

/* ── Chat main area ── */
.chat-main { flex: 1; display: flex; flex-direction: column; min-width: 0; }
.chat-messages {
  flex: 1; overflow-y: auto; padding: 32px 0; display: flex; flex-direction: column;
  scroll-behavior: smooth;
}
.chat-messages-inner { max-width: 680px; width: 100%; margin: 0 auto; padding: 0 24px; }

/* ── Welcome state ── */
.chat-welcome {
  flex: 1; display: flex; flex-direction: column; align-items: center;
  justify-content: center; padding: 40px; text-align: center;
}
.chat-welcome-icon {
  width: 56px; height: 56px; border-radius: 14px; background: var(--accent-glow);
  display: flex; align-items: center; justify-content: center;
  font-size: 24px; margin-bottom: 20px; border: 1px solid var(--border);
}
.chat-welcome-title { font-size: 18px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px; letter-spacing: -0.3px; }
.chat-welcome-sub { font-size: 14px; color: var(--text-secondary); max-width: 400px; line-height: 1.6; margin-bottom: 28px; }
.chat-suggestions { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; max-width: 520px; }
.chat-suggestion {
  padding: 9px 14px; border-radius: 8px; border: 1px solid var(--border);
  background: transparent; color: var(--text-secondary); font-size: 13px;
  cursor: pointer; transition: all var(--transition); font-family: inherit;
}
.chat-suggestion:hover {
  border-color: var(--border-light); color: var(--text-primary);
  background: var(--accent-glow);
}

/* ── Message bubbles ── */
.chat-msg { display: flex; gap: 12px; margin-bottom: 20px; animation: chatFadeIn 0.2s ease; }
.chat-msg.user { flex-direction: row-reverse; }
@keyframes chatFadeIn { from { opacity:0; transform:translateY(6px); } to { opacity:1; transform:translateY(0); } }
.chat-msg-avatar {
  width: 28px; height: 28px; border-radius: 8px; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 600;
}
.chat-msg.assistant .chat-msg-avatar { background: var(--bg-elevated); color: var(--text-secondary); border: 1px solid var(--border); }
.chat-msg.user .chat-msg-avatar { background: var(--bg-elevated); color: var(--text-secondary); border: 1px solid var(--border); }
.chat-msg-body { max-width: 85%; min-width: 0; }
.chat-msg-content {
  padding: 12px 16px; border-radius: 12px; font-size: 14px; line-height: 1.65;
  color: var(--text-primary); word-wrap: break-word;
}
.chat-msg.assistant .chat-msg-content { background: var(--bg-card); border: 1px solid var(--border); border-top-left-radius: 4px; }
.chat-msg.user .chat-msg-content { background: var(--accent-glow); border: 1px solid var(--border); border-top-right-radius: 4px; }
.chat-msg-content p { margin: 0 0 8px; }
.chat-msg-content p:last-child { margin-bottom: 0; }
.chat-msg-content strong { color: var(--text-primary); font-weight: 600; }
.chat-msg-content code {
  background: var(--bg-elevated); padding: 2px 6px; border-radius: 4px;
  font-family: var(--font-mono); font-size: 12px; border: 1px solid var(--border);
}
.chat-msg-content ul, .chat-msg-content ol { margin: 8px 0; padding-left: 20px; }
.chat-msg-content li { margin-bottom: 4px; }
.chat-msg-time { font-size: 10px; color: var(--text-muted); margin-top: 4px; padding: 0 4px; }
.chat-msg.user .chat-msg-time { text-align: right; }

/* ── Action card (campaign ready) ── */
.chat-action-card {
  margin-top: 10px; padding: 14px 16px; border-radius: 10px;
  background: var(--bg-elevated); border: 1px solid var(--border);
  border-left: 2px solid var(--text-muted);
}
.chat-action-title { font-size: 12px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.3px; }
.chat-action-params {
  display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 10px;
}
.chat-action-param {
  font-size: 11px; padding: 2px 8px; border-radius: 5px;
  background: var(--accent-glow); color: var(--text-secondary); border: 1px solid var(--border);
}
.chat-action-sequence { margin-bottom: 12px; }
.chat-action-step {
  display: flex; align-items: center; gap: 8px; padding: 6px 0;
  font-size: 12px; color: var(--text-secondary);
}
.chat-action-step-dot {
  width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0;
}
.chat-action-step-dot.email { background: var(--blue); }
.chat-action-step-dot.linkedin { background: var(--purple); }
.chat-action-buttons { display: flex; gap: 8px; }
.chat-action-btn {
  padding: 7px 14px; border-radius: 7px; font-size: 12px; font-weight: 500;
  cursor: pointer; font-family: inherit; transition: all var(--transition); border: none;
}
.chat-action-btn.primary { background: var(--text-primary); color: var(--bg-primary); }
.chat-action-btn.primary:hover { opacity: 0.85; }
.chat-action-btn.ghost { background: transparent; color: var(--text-secondary); border: 1px solid var(--border); }
.chat-action-btn.ghost:hover { border-color: var(--border-light); color: var(--text-primary); }

/* ── Typing indicator ── */
.chat-typing { display: flex; gap: 12px; margin-bottom: 20px; animation: chatFadeIn 0.2s ease; }
.chat-typing .chat-msg-avatar { background: var(--bg-elevated); color: var(--text-secondary); border: 1px solid var(--border); }
.chat-typing-dots {
  padding: 12px 16px; background: var(--bg-card); border: 1px solid var(--border);
  border-radius: 12px; border-top-left-radius: 4px; display: flex; gap: 4px; align-items: center;
}
.chat-typing-dot {
  width: 6px; height: 6px; border-radius: 50%; background: var(--text-muted);
  animation: typingBounce 1.4s infinite;
}
.chat-typing-dot:nth-child(2) { animation-delay: 0.2s; }
.chat-typing-dot:nth-child(3) { animation-delay: 0.4s; }
@keyframes typingBounce {
  0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
  30% { transform: translateY(-4px); opacity: 1; }
}

/* ── Input area ── */
.chat-input-area {
  padding: 14px 24px 18px; border-top: 1px solid var(--border);
  display: flex; justify-content: center;
}
.chat-input-wrapper {
  max-width: 680px; width: 100%; display: flex; gap: 8px; align-items: flex-end;
}
.chat-input {
  flex: 1; padding: 12px 16px; border-radius: 10px; border: 1px solid var(--border);
  background: var(--bg-card); color: var(--text-primary); font-size: 14px;
  font-family: inherit; resize: none; outline: none; min-height: 44px; max-height: 160px;
  line-height: 1.5; transition: border-color var(--transition);
}
.chat-input:focus { border-color: var(--text-muted); }
.chat-input::placeholder { color: var(--text-muted); }
.chat-send-btn {
  width: 44px; height: 44px; border-radius: 10px; border: none;
  background: var(--text-primary); color: var(--bg-primary); cursor: pointer; font-size: 16px;
  display: flex; align-items: center; justify-content: center;
  transition: all var(--transition); flex-shrink: 0;
}
.chat-send-btn:hover { opacity: 0.85; }
.chat-send-btn:disabled { opacity: 0.2; cursor: not-allowed; }

/* ═══════════ RESPONSIVE ═══════════ */
@media (max-width: 1200px) {
  .kpi-grid { grid-template-columns: repeat(3, 1fr); }
  .section-grid { grid-template-columns: 1fr; }
  .campaign-row { grid-template-columns: 1fr 1fr; gap: 12px; }
  .campaign-kpis { grid-template-columns: repeat(3, 1fr); }
  .sequence-step { grid-template-columns: 50px 1fr; gap: 10px; }
  .sequence-step .step-stat { display: none; }
  .chat-threads { width: 180px; min-width: 180px; }
}
</style>
</head>
<body>

<!-- ═══════════ SIDEBAR ═══════════ -->
<aside class="sidebar">
  <div class="logo">
    <div class="logo-icon">b</div>
    <div class="logo-text">bakal<span>.ai</span></div>
  </div>
  <nav class="nav">
    <div class="nav-section">
      <div class="nav-item active" onclick="showPage('chat')" style="margin-bottom:8px;"><span class="icon">~</span> Assistant</div>
    </div>
    <div class="nav-section">
      <div class="nav-label">Workspace</div>
      <div class="nav-item" onclick="showPage('dashboard')"><span class="icon">&mdash;</span> Dashboard <span class="badge">Live</span></div>
      <div class="nav-item" onclick="showPage('dashboard','campaigns')"><span class="icon">&mdash;</span> Campagnes</div>
      <div class="nav-item" onclick="showPage('dashboard','overview')"><span class="icon">&mdash;</span> Opportunités <span class="badge">3</span></div>
      <div class="nav-item" onclick="showPage('dashboard','reports')"><span class="icon">&mdash;</span> Rapports</div>
    </div>
    <div class="nav-section">
      <div class="nav-label">Configuration</div>
      <div class="nav-item" onclick="showPage('profil')"><span class="icon">&mdash;</span> Profil Entreprise</div>
      <div class="nav-item" onclick="showPage('copyeditor')"><span class="icon">&mdash;</span> Copy & Séquences</div>
      <div class="nav-item" onclick="showPage('settings')"><span class="icon">&mdash;</span> Paramètres</div>
    </div>
    <div class="nav-section">
      <div class="nav-label">Intelligence</div>
      <div class="nav-item" onclick="showPage('dashboard','refinement')"><span class="icon">&mdash;</span> Refinement A/B</div>
      <div class="nav-item" onclick="showPage('recos')"><span class="icon">&mdash;</span> Recommandations <span class="badge">3</span></div>
      <div class="nav-item" onclick="showPage('dashboard','refinement')"><span class="icon">&mdash;</span> Historique</div>
    </div>
  </nav>
  <div class="sidebar-footer">
    <div class="user-card">
      <div class="user-avatar">FC</div>
      <div class="user-info">
        <div class="user-name">FormaPro Consulting</div>
        <div class="user-plan">Plan Pilot · S4/8</div>
      </div>
    </div>
  </div>
</aside>

<!-- ═══════════ MAIN CONTENT ═══════════ -->
<main class="main">
  <!-- Header -->
  <div class="page-header">
    <div>
      <div class="page-title">Dashboard</div>
      <div class="page-subtitle"><span class="pulse-dot"></span>&nbsp;&nbsp;2 campagnes actives · Semaine du 17 fév. 2026</div>
    </div>
    <div class="header-actions">
      <button class="btn btn-ghost" onclick="exportDashboardReport()">📥 Exporter le rapport</button>
      <button class="btn btn-primary" onclick="toggleCreator()">✨ Nouvelle campagne</button>
    </div>
  </div>

  <!-- Tabs -->
  <div class="tabs">
    <div class="tab active" onclick="showSection('overview')">Vue d'ensemble</div>
    <div class="tab" onclick="showSection('reports')">Rapports hebdo</div>
    <div class="tab" onclick="showSection('campaigns')">Détail campagnes</div>
    <div class="tab" onclick="showSection('refinement')">🧬 Refinement A/B</div>
  </div>

  <!-- ═══════════ OVERVIEW (populated by campaigns-data.js) ═══════════ -->
  <div id="section-overview">
    <div class="kpi-grid"></div>

    <!-- Main Grid -->
    <div class="section-grid">
      <!-- Campaigns table -->
      <div class="card">
        <div class="card-header">
          <div class="card-title">🎯 Campagnes actives</div>
          <button class="btn btn-ghost" style="padding: 6px 12px; font-size: 12px;" onclick="showSection('campaigns')">Voir tout →</button>
        </div>
        <div class="card-body" style="padding: 0;">
          <table class="campaign-table">
            <thead>
              <tr>
                <th>Campagne</th>
                <th>Canal</th>
                <th>Statut</th>
                <th>Ouvertures</th>
                <th>Réponses</th>
                <th>RDV</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

      <!-- Performance chart -->
      <div class="card">
        <div class="card-header">
          <div class="card-title">📈 Performance 4 semaines</div>
        </div>
        <div class="card-body">
          <div class="chart-container">
            <div class="chart-bars"></div>
          </div>
          <div class="chart-legend">
            <div class="chart-legend-item"><div class="chart-legend-dot" style="background:var(--blue)"></div> Email</div>
            <div class="chart-legend-item"><div class="chart-legend-dot" style="background:var(--purple)"></div> LinkedIn</div>
          </div>
        </div>
      </div>

      <!-- Opportunities -->
      <div class="card">
        <div class="card-header">
          <div class="card-title">🔥 Opportunités récentes</div>
          <span class="badge" style="background:var(--danger-bg);color:var(--danger);padding:4px 10px;border-radius:6px;font-size:12px;font-weight:600;">3 nouvelles</span>
        </div>
        <div class="card-body" style="padding:16px 24px;">
          <div style="display:flex;flex-direction:column;gap:12px;"></div>
        </div>
      </div>

      <!-- AI Recommendations -->
      <div class="card">
        <div class="card-header">
          <div class="card-title">💡 Recommandations Claude</div>
        </div>
        <div class="card-body">
          <div style="display:flex;flex-direction:column;gap:12px;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ═══════════ REPORTS (populated by campaigns-data.js) ═══════════ -->
  <div id="section-reports" style="display:none;"></div>

  <!-- ═══════════ CAMPAIGNS (populated by campaigns-data.js) ═══════════ -->
  <div id="section-campaigns" style="display:none;">

    <!-- Campaign List View -->
    <div id="campaigns-list-view">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
        <div>
          <div style="font-size:16px;font-weight:600;">0 campagnes</div>
          <div style="font-size:13px;color:var(--text-muted);">Cliquez sur une campagne pour voir le détail</div>
        </div>
        <div style="display:flex;gap:8px;">
          <button class="btn btn-ghost" style="font-size:12px;padding:8px 14px;" onclick="filterCampaignsList()">🔍 Filtrer</button>
          <button class="btn btn-ghost" style="font-size:12px;padding:8px 14px;" onclick="sortCampaignsList()">↕ Trier par perf.</button>
        </div>
      </div>
      <div class="campaigns-list"></div>
    </div>

  </div>

  <!-- ═══════════ REFINEMENT A/B SECTION ═══════════ -->
  <div id="section-refinement" style="display:none;">
    
    <!-- Overview Stats -->
    <div class="refine-overview">
      <div class="refine-stat-card">
        <div class="refine-stat-value" style="color:var(--text-primary)">12</div>
        <div class="refine-stat-label">Variantes testées (total)</div>
      </div>
      <div class="refine-stat-card">
        <div class="refine-stat-value" style="color:var(--success)">+4.1pts</div>
        <div class="refine-stat-label">Gain taux de réponse depuis le lancement</div>
      </div>
      <div class="refine-stat-card">
        <div class="refine-stat-value" style="color:var(--warning)">2</div>
        <div class="refine-stat-label">Tests A/B en cours</div>
      </div>
      <div class="refine-stat-card">
        <div class="refine-stat-value" style="color:var(--blue)">3</div>
        <div class="refine-stat-label">"Golden nuggets" identifiées</div>
      </div>
    </div>

    <!-- Active Test: Campaign DAF IDF -->
    <div class="card" style="margin-bottom:24px;">
      <div class="card-header">
        <div class="card-title">🧬 Test actif — Campagne "DAF Île-de-France"</div>
        <span style="font-size:12px;color:var(--text-muted);">Itération 4 · Lancé il y a 6 jours</span>
      </div>
      <div class="card-body" style="padding:16px 24px;">

        <!-- Variant A - Control / Winner -->
        <div class="variant-card winner">
          <div class="variant-header">
            <div class="variant-name">
              <span>Variante A</span>
              <span class="variant-badge winner">👑 Contrôle</span>
            </div>
            <span style="font-size:12px;color:var(--text-muted);">250 prospects · 6 jours</span>
          </div>
          <div class="variant-body">
            <div class="variant-message">
              <div class="subject">Objet : [Prénom], une question sur votre gestion financière</div>
              Angle : <strong>Douleur client</strong> — "Combien d'heures par semaine votre équipe passe-t-elle sur des tâches qui pourraient être automatisées ?"<br>
              CTA : Question ouverte · Ton : Conversationnel · Longueur : Court (3 phrases)
            </div>
            <div class="variant-metrics">
              <div class="variant-metric">
                <div class="variant-metric-value" style="color:var(--text-primary)">64%</div>
                <div class="variant-metric-label">Ouverture</div>
              </div>
              <div class="variant-metric">
                <div class="variant-metric-value" style="color:var(--success)">9.2%</div>
                <div class="variant-metric-label">Réponse</div>
              </div>
              <div class="variant-metric">
                <div class="variant-metric-value" style="color:var(--warning)">6</div>
                <div class="variant-metric-label">Intéressés</div>
              </div>
              <div class="variant-metric">
                <div class="variant-metric-value" style="color:var(--blue)">3</div>
                <div class="variant-metric-label">RDV</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Variant B - Challenger -->
        <div class="variant-card testing">
          <div class="variant-header">
            <div class="variant-name">
              <span>Variante B</span>
              <span class="variant-badge testing">⚡ Challenger</span>
            </div>
            <span style="font-size:12px;color:var(--text-muted);">250 prospects · 6 jours</span>
          </div>
          <div class="variant-body">
            <div class="variant-message">
              <div class="subject">Objet : [Prénom], vos concurrents font déjà ça</div>
              Angle : <strong>Douleur + Urgence</strong> — "3 cabinets sur 5 dans votre secteur ont automatisé ce processus l'an dernier. Et vous ?"<br>
              CTA : Stat provocante · Ton : Direct · Longueur : Ultra-court (2 phrases)
            </div>
            <div class="variant-metrics">
              <div class="variant-metric">
                <div class="variant-metric-value" style="color:var(--text-primary)">71%</div>
                <div class="variant-metric-label">Ouverture</div>
              </div>
              <div class="variant-metric">
                <div class="variant-metric-value" style="color:var(--success)">7.8%</div>
                <div class="variant-metric-label">Réponse</div>
              </div>
              <div class="variant-metric">
                <div class="variant-metric-value" style="color:var(--warning)">4</div>
                <div class="variant-metric-label">Intéressés</div>
              </div>
              <div class="variant-metric">
                <div class="variant-metric-value" style="color:var(--blue)">1</div>
                <div class="variant-metric-label">RDV</div>
              </div>
            </div>
          </div>
        </div>

        <!-- AI Analysis -->
        <div style="background:var(--bg-elevated);border-radius:12px;padding:20px;margin-top:8px;border-left:2px solid var(--border-light);">
          <div style="font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:8px;">🤖 Analyse Claude — Itération 4</div>
          <div style="font-size:13px;color:var(--text-secondary);line-height:1.65;">
            <strong>Variante A reste le contrôle.</strong> Malgré un meilleur taux d'ouverture (+7pts) grâce à l'objet provocant, la Variante B convertit moins en RDV (ratio réponse→RDV de 12.5% vs 33% pour A). L'angle urgence ouvre la curiosité mais crée une réaction défensive chez les DAF.<br><br>
            <strong>Prochaine itération proposée :</strong> Variante C — garder la longueur ultra-courte de B (meilleure ouverture) mais revenir sur l'angle douleur client de A avec un CTA question ouverte. Hypothèse : combiner les forces des deux variantes.
          </div>
          <div style="display:flex;gap:8px;margin-top:14px;">
            <button class="btn btn-success" style="font-size:12px;padding:8px 14px;" onclick="launchVariantC(this)">✅ Lancer Variante C</button>
            <button class="btn btn-ghost" style="font-size:12px;padding:8px 14px;" onclick="modifyProposition(this)">✏️ Modifier la proposition</button>
            <button class="btn btn-ghost" style="font-size:12px;padding:8px 14px;" onclick="pauseTest(this)">⏸ Pause le test</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ═══ Variable Generator ═══ -->
    <div class="vargen-card" id="vargen-card">
      <div class="vargen-header">
        <div class="vargen-header-left">
          <div class="vargen-header-icon">🧬</div>
          <div>
            <div class="vargen-header-title">Générateur de variables</div>
            <div class="vargen-header-subtitle">Variables stratégiques suggérées par l'IA en fonction de votre industrie et vos campagnes</div>
          </div>
        </div>
        <div style="display:flex;gap:8px;">
          <button class="btn btn-ghost" style="font-size:12px;padding:8px 14px;" onclick="regenerateVarSuggestions()">🔄 Régénérer</button>
          <button class="btn btn-primary" style="font-size:12px;padding:8px 14px;" onclick="acceptAllVarSuggestions()">✅ Tout accepter</button>
        </div>
      </div>

      <!-- Context bar: which campaign / industry drives these suggestions -->
      <div class="vargen-context" id="vargen-context"></div>

      <div class="vargen-body" id="vargen-body">
        <!-- Populated by JS -->
      </div>
    </div>

    <!-- Learning Memory -->
    <div class="refine-timeline">
      <div class="refine-timeline-title">🧠 Mémoire d'apprentissage — FormaPro Consulting</div>
      
      <div class="timeline-item">
        <div class="timeline-dot green"></div>
        <div class="timeline-content">
          <div class="timeline-action">Golden nugget trouvée — Angle "douleur client" + CTA question ouverte</div>
          <div class="timeline-detail">Campagne DAF IDF · 9.2% de taux de réponse · Itération 3→4</div>
          <div class="learning-card">
            <div class="label">💎 Apprentissage validé</div>
            <div class="text">L'angle "douleur client" surperforme systématiquement de +3.2pts vs "preuve sociale" sur le segment comptabilité/finance. Le CTA question ouverte génère 2x plus de réponses que le CTA proposition de call.</div>
          </div>
        </div>
        <div class="timeline-date">Il y a 3 jours</div>
      </div>

      <div class="timeline-item">
        <div class="timeline-dot blue"></div>
        <div class="timeline-content">
          <div class="timeline-action">Optimisation horaire détectée</div>
          <div class="timeline-detail">Cross-campagnes · +15% d'ouverture le mardi 9h-10h</div>
          <div class="learning-card">
            <div class="label">📊 Pattern identifié</div>
            <div class="text">Les emails envoyés le mardi matin (9h-10h) ont un taux d'ouverture 15% supérieur. Ce créneau est désormais appliqué automatiquement à toutes les nouvelles campagnes.</div>
          </div>
        </div>
        <div class="timeline-date">Semaine 3</div>
      </div>

      <div class="timeline-item">
        <div class="timeline-dot orange"></div>
        <div class="timeline-content">
          <div class="timeline-action">Angle "preuve sociale" abandonné sur segment finance</div>
          <div class="timeline-detail">2 tests consécutifs sous-performants (4.1% et 5.0% de réponse)</div>
        </div>
        <div class="timeline-date">Semaine 2</div>
      </div>

      <div class="timeline-item">
        <div class="timeline-dot purple"></div>
        <div class="timeline-content">
          <div class="timeline-action">Premier test A/B lancé</div>
          <div class="timeline-detail">Campagne DAF IDF · Angle douleur vs preuve sociale · 100 prospects chacun</div>
        </div>
        <div class="timeline-date">Semaine 1</div>
      </div>
    </div>

  </div>

  <!-- ═══════════ COPY & SEQUENCES EDITOR ═══════════ -->
  <div id="page-copyeditor" style="display:none;">
    <div class="page-header">
      <div>
        <div class="page-title">Copy & Séquences</div>
        <div class="page-subtitle">Éditeur de messages — 3 campagnes · 12 touchpoints</div>
      </div>
      <div class="header-actions">
        <button class="btn btn-ghost" onclick="exportAllSequences()">📥 Exporter tout</button>
        <button class="btn btn-primary" onclick="generateNewSequence()">✨ Générer une séquence</button>
      </div>
    </div>
    <div class="editor-layout">
      <div class="editor-sidebar">
        <div class="editor-sidebar-title">Campagnes</div>
        <div id="editor-campaign-list"></div>
        <div style="border-top:1px solid var(--border);margin:16px 0;"></div>
        <div class="editor-sidebar-title">Bibliothèque</div>
        <div class="editor-campaign-item" style="opacity:0.5;cursor:default;">
          <div class="eci-icon" style="background:var(--bg-elevated);">📚</div>
          <div><div class="eci-name" style="font-size:13px;">Modèles sauvegardés</div><div class="eci-meta">3 modèles</div></div>
        </div>
        <div class="editor-campaign-item" style="opacity:0.5;cursor:default;">
          <div class="eci-icon" style="background:var(--bg-elevated);">💎</div>
          <div><div class="eci-name" style="font-size:13px;">Golden nuggets</div><div class="eci-meta">5 apprentissages</div></div>
        </div>

        <!-- Variable Manager Panel -->
        <div class="var-panel" id="var-panel">
          <div class="var-panel-toggle" id="var-panel-toggle" onclick="toggleVarPanel()">
            <div class="var-panel-toggle-left">
              <span>🔗</span>
              <span>Variables</span>
              <span class="var-panel-count" id="var-panel-count">15</span>
            </div>
            <span class="chevron">▶</span>
          </div>
          <div class="var-panel-body" id="var-panel-body"></div>
        </div>
      </div>
      <div class="editor-main" id="editor-main-content"></div>
    </div>
  </div>

  <!-- Custom Variable Modal -->
  <div class="var-modal-overlay" id="var-modal-overlay" onclick="if(event.target===this)closeVarModal()">
    <div class="var-modal">
      <div class="var-modal-title">Nouvelle variable</div>
      <div class="var-modal-subtitle">Créez une variable personnalisée à utiliser dans vos séquences et synchroniser avec Lemlist.</div>

      <div class="var-modal-field">
        <label>Nom de la variable</label>
        <input type="text" id="var-modal-name" placeholder="ex: revenuAnnuel, dernierPost, nbEmployes..." oninput="updateVarPreview()">
        <div class="field-hint">Utilisez le camelCase, sans espaces ni caractères spéciaux.</div>
      </div>

      <div class="var-modal-field">
        <label>Description</label>
        <input type="text" id="var-modal-desc" placeholder="ex: Chiffre d'affaires annuel estimé du prospect">
      </div>

      <div class="var-modal-field">
        <label>Valeur par défaut (optionnel)</label>
        <input type="text" id="var-modal-default" placeholder="ex: votre entreprise">
        <div class="field-hint">Utilisée quand la donnée n'est pas disponible pour un prospect.</div>
      </div>

      <div class="var-modal-field">
        <label>Catégorie</label>
        <select id="var-modal-category">
          <option value="prospect">Prospect</option>
          <option value="company">Entreprise</option>
          <option value="enrichment">Enrichissement</option>
          <option value="custom">Personnalisé</option>
        </select>
      </div>

      <div class="var-modal-field">
        <label>Synchronisation Lemlist</label>
        <select id="var-modal-sync">
          <option value="push">Push vers Lemlist (créer le champ)</option>
          <option value="pull">Pull depuis Lemlist (champ existant)</option>
          <option value="bidirectional">Bidirectionnel</option>
          <option value="local">Local uniquement (pas de sync)</option>
        </select>
        <div class="field-hint">Définit comment la variable est synchronisée avec vos outils externes.</div>
      </div>

      <div class="var-modal-preview" id="var-modal-preview">
        <span class="var-modal-preview-label">Prévisualisation :</span>
        <span class="var-modal-preview-tag" id="var-modal-preview-tag">{{maVariable}}</span>
      </div>

      <div class="var-modal-actions">
        <button class="btn btn-ghost" style="font-size:13px;padding:8px 18px;" onclick="closeVarModal()">Annuler</button>
        <button class="btn btn-primary" style="font-size:13px;padding:8px 18px;" onclick="createCustomVariable()">Créer la variable</button>
      </div>
    </div>
  </div>

  <!-- ═══════════ RECOMMANDATIONS IA PAGE ═══════════ -->
  <div id="page-recos" style="display:none;">
    <div class="reco-page-header">
      <div>
        <div class="reco-page-title">Recommandations IA</div>
        <div class="reco-page-subtitle">Claude analyse vos campagnes et propose des optimisations · Mis à jour il y a 2h</div>
      </div>
      <div class="header-actions">
        <button class="btn btn-ghost" onclick="showPage('dashboard','refinement')">📋 Historique</button>
        <button class="btn btn-primary" onclick="rerunAnalysis()">🔄 Relancer l'analyse</button>
      </div>
    </div>

    <!-- Stats -->
    <div class="reco-stats">
      <div class="reco-stat-card">
        <div class="reco-stat-value" style="color:var(--text-primary);">12</div>
        <div class="reco-stat-label">Recommandations totales</div>
        <div class="reco-stat-trend up">4 nouvelles cette semaine</div>
      </div>
      <div class="reco-stat-card">
        <div class="reco-stat-value" style="color:var(--success);">7</div>
        <div class="reco-stat-label">Appliquées</div>
        <div class="reco-stat-trend up">▲ +4.2pts réponse en moyenne</div>
      </div>
      <div class="reco-stat-card">
        <div class="reco-stat-value" style="color:var(--warning);">3</div>
        <div class="reco-stat-label">En attente</div>
        <div class="reco-stat-trend" style="color:var(--warning);">1 critique</div>
      </div>
      <div class="reco-stat-card">
        <div class="reco-stat-value" style="color:var(--text-muted);">2</div>
        <div class="reco-stat-label">Ignorées</div>
        <div class="reco-stat-trend" style="color:var(--text-muted);">—</div>
      </div>
    </div>

    <!-- Filters -->
    <div class="reco-filters">
      <button class="reco-filter active">Toutes <span class="count">5</span></button>
      <button class="reco-filter">Critiques <span class="count">1</span></button>
      <button class="reco-filter">Importantes <span class="count">2</span></button>
      <button class="reco-filter">Suggestions <span class="count">1</span></button>
      <button class="reco-filter">Appliquées <span class="count">1</span></button>
      <span style="border-left:1px solid var(--border);margin:0 4px;"></span>
      <button class="reco-filter">DAF Île-de-France</button>
      <button class="reco-filter">Dirigeants Formation</button>
      <button class="reco-filter">DRH PME Lyon</button>
    </div>

    <!-- Recommendation Cards -->
    <div class="reco-list">

      <!-- RECO 1: Critical -->
      <div class="reco-card priority-critical">
        <div class="reco-card-header">
          <div class="reco-card-left">
            <span class="reco-priority-badge critical">Critique</span>
            <div>
              <div class="reco-card-campaign">DRH PME Lyon</div>
              <div class="reco-card-step">E1 — Email initial · Offre directe</div>
            </div>
          </div>
          <div class="reco-card-meta">
            <span class="reco-impact-badge">+2-3pts reply estimé</span>
            <span class="reco-card-date">Il y a 1h</span>
          </div>
        </div>
        <div class="reco-card-body">
          <div class="reco-card-title">Remplacer le CTA agressif par une question ouverte</div>
          <div class="reco-card-desc">
            Le CTA "Seriez-vous disponible 15 minutes cette semaine ?" est trop direct pour un premier contact DRH.
            Vos données cross-campagne montrent que les <strong>questions ouvertes</strong> sur les pain points
            génèrent 2x plus de réponses que les propositions de call directes sur ce segment.
          </div>

          <div class="reco-diff">
            <div class="reco-diff-panel">
              <div class="reco-diff-label before">Actuel</div>
              <div class="reco-diff-text">
                Nous aidons des DRH de PME comme {{companyName}} à réduire de 40% leur temps de recrutement.
                <span class="strikethrough">Seriez-vous disponible 15 minutes cette semaine pour en discuter ?</span>
              </div>
            </div>
            <div class="reco-diff-panel">
              <div class="reco-diff-label after">Proposition Claude</div>
              <div class="reco-diff-text">
                Nous aidons des DRH de PME comme {{companyName}} à réduire de 40% leur temps de recrutement.
                <span class="highlight">Quel est votre plus gros défi recrutement en ce moment ?</span>
              </div>
            </div>
          </div>

          <div class="reco-card-actions">
            <button class="reco-btn accept" onclick="applyReco(this)">✅ Appliquer</button>
            <button class="reco-btn modify" onclick="modifyReco(this)">✏️ Modifier avant d'appliquer</button>
            <button class="reco-btn dismiss" onclick="dismissReco(this)">Ignorer</button>
          </div>
        </div>
      </div>

      <!-- RECO 2: Important -->
      <div class="reco-card priority-important">
        <div class="reco-card-header">
          <div class="reco-card-left">
            <span class="reco-priority-badge important">Important</span>
            <div>
              <div class="reco-card-campaign">DAF Île-de-France</div>
              <div class="reco-card-step">E3 — Email relance · J+7</div>
            </div>
          </div>
          <div class="reco-card-meta">
            <span class="reco-impact-badge">+2.1pts reply estimé</span>
            <span class="reco-card-date">Il y a 3h</span>
          </div>
        </div>
        <div class="reco-card-body">
          <div class="reco-card-title">Remplacer l'angle "coût de l'erreur" par "gain de temps"</div>
          <div class="reco-card-desc">
            L'E3 a un taux de réponse de seulement 1.4% (vs 4.2% sur E1). L'angle anxiogène
            "coût d'une erreur de saisie" est mal reçu par les DAF qui y voient une remise en question de leur compétence.
            Votre mémoire cross-campagne montre que l'angle positif <strong>"gain de temps"</strong> performe
            systématiquement mieux (+2.1pts en moyenne) sur le segment Comptabilité/Finance.
          </div>

          <div class="reco-diff">
            <div class="reco-diff-panel">
              <div class="reco-diff-label before">Actuel</div>
              <div class="reco-diff-text">
                {{firstName}}, je change d'approche. Plutôt que de parler d'automatisation, une question simple :
                <span class="strikethrough">quel est le coût réel d'une erreur de saisie dans un bilan chez {{companyName}} ?</span>
              </div>
            </div>
            <div class="reco-diff-panel">
              <div class="reco-diff-label after">Proposition Claude</div>
              <div class="reco-diff-text">
                {{firstName}}, une question différente :
                <span class="highlight">si vous pouviez récupérer une journée complète par semaine pour du conseil à valeur ajoutée, qu'en feriez-vous ?</span>
                C'est exactement ce que nos clients dans la finance ont obtenu.
              </div>
            </div>
          </div>

          <div class="reco-card-actions">
            <button class="reco-btn accept" onclick="applyReco(this)">✅ Appliquer</button>
            <button class="reco-btn modify" onclick="modifyReco(this)">✏️ Modifier avant d'appliquer</button>
            <button class="reco-btn dismiss" onclick="dismissReco(this)">Ignorer</button>
          </div>
        </div>
      </div>

      <!-- RECO 3: Important -->
      <div class="reco-card priority-important">
        <div class="reco-card-header">
          <div class="reco-card-left">
            <span class="reco-priority-badge important">Important</span>
            <div>
              <div class="reco-card-campaign">Dirigeants Formation</div>
              <div class="reco-card-step">L2 — Message post-connexion LinkedIn</div>
            </div>
          </div>
          <div class="reco-card-meta">
            <span class="reco-impact-badge">+1.5pts reply estimé</span>
            <span class="reco-card-date">Il y a 5h</span>
          </div>
        </div>
        <div class="reco-card-body">
          <div class="reco-card-title">Passer de preuve sociale vers angle douleur client</div>
          <div class="reco-card-desc">
            Le taux de réponse LinkedIn (6.8%) est sous l'objectif de 8%. Le message actuel utilise une preuve
            sociale vague ("3 organismes de formation") qui manque de spécificité. Les données montrent
            que les <strong>questions directes sur les pain points</strong> fonctionnent mieux sur LinkedIn
            car le format conversationnel s'y prête naturellement.
          </div>

          <div class="reco-diff">
            <div class="reco-diff-panel">
              <div class="reco-diff-label before">Actuel</div>
              <div class="reco-diff-text">
                Merci d'avoir accepté, {{firstName}} !
                <span class="strikethrough">J'ai accompagné 3 organismes de formation comme le vôtre à générer entre 5 et 12 RDV qualifiés par mois.</span>
                Curieux de savoir comment vous gérez votre développement commercial actuellement ?
              </div>
            </div>
            <div class="reco-diff-panel">
              <div class="reco-diff-label after">Proposition Claude</div>
              <div class="reco-diff-text">
                Merci d'avoir accepté, {{firstName}} !
                <span class="highlight">Quel est votre plus gros frein pour trouver de nouveaux clients en ce moment ?</span>
                Je pose la question car c'est un sujet qui revient souvent chez les dirigeants d'organismes de formation.
              </div>
            </div>
          </div>

          <div class="reco-card-actions">
            <button class="reco-btn accept" onclick="applyReco(this)">✅ Appliquer</button>
            <button class="reco-btn modify" onclick="modifyReco(this)">✏️ Modifier avant d'appliquer</button>
            <button class="reco-btn dismiss" onclick="dismissReco(this)">Ignorer</button>
          </div>
        </div>
      </div>

      <!-- RECO 4: Suggestion -->
      <div class="reco-card priority-suggestion">
        <div class="reco-card-header">
          <div class="reco-card-left">
            <span class="reco-priority-badge suggestion">Suggestion</span>
            <div>
              <div class="reco-card-campaign">DAF Île-de-France</div>
              <div class="reco-card-step">E4 — Email break-up · J+12</div>
            </div>
          </div>
          <div class="reco-card-meta">
            <span class="reco-card-date">Il y a 5h</span>
          </div>
        </div>
        <div class="reco-card-body">
          <div class="reco-card-title">Raccourcir le break-up de 4 phrases à 3</div>
          <div class="reco-card-desc">
            Le break-up actuel fait 4 phrases, l'objectif est 3 max. La phrase "Juste un dernier mot : si un jour
            12h/semaine..." peut être fusionnée avec la précédente. Impact faible mais aligné avec les bonnes pratiques
            de break-up email (court = plus de respect perçu = meilleure image de marque).
          </div>

          <div class="reco-diff">
            <div class="reco-diff-panel">
              <div class="reco-diff-label before">Actuel (4 phrases)</div>
              <div class="reco-diff-text">
                {{firstName}}, je ne veux pas encombrer votre boîte.<br>
                Si ce n'est pas le bon moment, pas de souci — je ne reviendrai pas.<br>
                <span class="strikethrough">Juste un dernier mot : si un jour 12h/semaine récupérées ça vous intéresse, mon agenda est ouvert.</span><br>
                Bonne continuation.
              </div>
            </div>
            <div class="reco-diff-panel">
              <div class="reco-diff-label after">Proposition (3 phrases)</div>
              <div class="reco-diff-text">
                {{firstName}}, je ne veux pas encombrer votre boîte.<br>
                <span class="highlight">Si ce n'est pas le bon moment, aucun souci — mon agenda reste ouvert si un jour 12h/semaine récupérées vous intéressent.</span><br>
                Bonne continuation.
              </div>
            </div>
          </div>

          <div class="reco-card-actions">
            <button class="reco-btn accept" onclick="applyReco(this)">✅ Appliquer</button>
            <button class="reco-btn modify" onclick="modifyReco(this)">✏️ Modifier</button>
            <button class="reco-btn dismiss" onclick="dismissReco(this)">Ignorer</button>
          </div>
        </div>
      </div>

      <!-- RECO 5: Applied -->
      <div class="reco-card priority-applied">
        <div class="reco-card-header">
          <div class="reco-card-left">
            <span class="reco-priority-badge applied">Appliquée</span>
            <div>
              <div class="reco-card-campaign">DAF Île-de-France</div>
              <div class="reco-card-step">E1 — Objet email initial</div>
            </div>
          </div>
          <div class="reco-card-meta">
            <span class="reco-impact-badge">▲ +8pts ouverture</span>
            <span class="reco-card-date">3 fév.</span>
          </div>
        </div>
        <div class="reco-card-body">
          <div class="reco-card-title">Personnaliser l'objet avec {{firstName}} + question sectorielle</div>
          <div class="reco-card-desc">
            Remplacement de l'objet générique par un objet personnalisé avec le prénom du prospect et une question
            ciblée sur le secteur. Résultat : <strong>+8 points de taux d'ouverture</strong> (de 60% à 68%).
          </div>
          <div class="reco-applied-note">
            ✅ Appliquée le 3 fév. · Résultat confirmé après 150 prospects · Itération v2 → v3
          </div>
        </div>
      </div>

    </div>

    <!-- Cross-Campaign Insights -->
    <div class="reco-insight-card">
      <div class="reco-insight-title">🧠 Patterns cross-campagne détectés</div>
      <div class="reco-insight-grid">
        <div class="reco-insight-item">
          <div class="reco-insight-item-title">Questions ouvertes > CTA directs</div>
          <div class="reco-insight-item-text">
            Les CTA sous forme de question ("Quel est votre plus gros frein...?") génèrent 2.1x plus de réponses
            que les propositions de call directes. Observé sur les 3 campagnes actives.
          </div>
          <div class="reco-insight-item-confidence high">Confiance haute · 400+ prospects</div>
        </div>
        <div class="reco-insight-item">
          <div class="reco-insight-item-title">Angle positif > anxiogène</div>
          <div class="reco-insight-item-text">
            "Gain de temps" et "récupérer X heures" performent +2.1pts mieux que "coût de l'erreur" et "risque de..."
            sur les profils finance et RH.
          </div>
          <div class="reco-insight-item-confidence medium">Confiance moyenne · 150 prospects</div>
        </div>
        <div class="reco-insight-item">
          <div class="reco-insight-item-title">"Re:" booste les ouvertures</div>
          <div class="reco-insight-item-text">
            Utiliser "Re:" dans l'objet des follow-ups augmente le taux d'ouverture de +4pts en moyenne.
            Fonctionne mieux que les objets complètement différents.
          </div>
          <div class="reco-insight-item-confidence high">Confiance haute · 250+ prospects</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ═══════════ CHAT PAGE ═══════════ -->
  <div id="page-chat" style="display:none;">
    <div class="chat-page">
      <!-- Thread sidebar -->
      <div class="chat-threads">
        <div class="chat-threads-header">
          <div class="chat-threads-title">Conversations</div>
          <button class="chat-new-btn" onclick="newChatThread()" title="Nouvelle conversation">+</button>
        </div>
        <div class="chat-thread-list" id="chatThreadList"></div>
      </div>

      <!-- Main chat area -->
      <div class="chat-main">
        <!-- Welcome state (shown when no messages) -->
        <div class="chat-welcome" id="chatWelcome">
          <div class="chat-welcome-icon">b</div>
          <div class="chat-welcome-title">Comment puis-je vous aider ?</div>
          <div class="chat-welcome-sub">
            Je suis votre assistant Bakal. Décrivez-moi votre cible idéale, et je construirai votre campagne de prospection sur mesure.
          </div>
          <div class="chat-suggestions">
            <button class="chat-suggestion" onclick="sendSuggestion(this)">Créer une campagne pour cibler des DAF en Île-de-France</button>
            <button class="chat-suggestion" onclick="sendSuggestion(this)">Mon ICP : dirigeants PME dans la formation</button>
            <button class="chat-suggestion" onclick="sendSuggestion(this)">Optimiser ma campagne qui sous-performe</button>
            <button class="chat-suggestion" onclick="sendSuggestion(this)">Quel angle d'approche pour le secteur tech ?</button>
          </div>
        </div>

        <!-- Messages area (hidden until first message) -->
        <div class="chat-messages" id="chatMessages" style="display:none;">
          <div class="chat-messages-inner" id="chatMessagesInner"></div>
        </div>

        <!-- Input -->
        <div class="chat-input-area">
          <div class="chat-input-wrapper">
            <textarea class="chat-input" id="chatInput" placeholder="Décrivez votre campagne idéale..." rows="1" onkeydown="handleChatKeydown(event)" oninput="autoResizeChatInput(this)"></textarea>
            <button class="chat-send-btn" id="chatSendBtn" onclick="sendChatMessage()">↑</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ═══════════ PROFIL ENTREPRISE PAGE ═══════════ -->
  <div id="page-profil" style="display:none;">
    <div class="page-header">
      <div>
        <div class="page-title">Profil Entreprise</div>
        <div class="page-subtitle">Informations utilisées par Claude pour personnaliser vos séquences</div>
      </div>
      <div class="header-actions">
        <button class="btn btn-primary" onclick="saveProfile()">💾 Enregistrer</button>
      </div>
    </div>

    <div class="settings-grid">
      <!-- Company Info -->
      <div class="card">
        <div class="card-header"><div class="card-title">🏢 Informations société</div></div>
        <div class="card-body">
          <div class="form-stack">
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Nom de l'entreprise</label>
                <input class="form-input" id="profil-company" placeholder="Ex: FormaPro Consulting" value="FormaPro Consulting">
              </div>
              <div class="form-group">
                <label class="form-label">Secteur d'activité</label>
                <input class="form-input" id="profil-sector" placeholder="Ex: Formation professionnelle" value="Formation & Consulting RH">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Site web</label>
                <input class="form-input" id="profil-website" placeholder="https://votresite.com" value="https://formapro-consulting.fr">
              </div>
              <div class="form-group">
                <label class="form-label">Taille de l'équipe</label>
                <select class="form-select" id="profil-team-size">
                  <option>1-5 personnes</option>
                  <option selected>6-20 personnes</option>
                  <option>21-50 personnes</option>
                  <option>51-200 personnes</option>
                  <option>200+ personnes</option>
                </select>
              </div>
            </div>
            <div class="form-group full">
              <label class="form-label">Description courte</label>
              <textarea class="form-textarea" id="profil-description" rows="2" placeholder="En 1-2 phrases, que fait votre entreprise ?">Cabinet de conseil en formation et transformation RH. Nous accompagnons les PME dans l'optimisation de leurs processus de recrutement et de développement des compétences.</textarea>
            </div>
          </div>
        </div>
      </div>

      <!-- Value Proposition -->
      <div class="card">
        <div class="card-header"><div class="card-title">💎 Proposition de valeur</div></div>
        <div class="card-body">
          <div class="form-stack">
            <div class="form-group full">
              <label class="form-label">Proposition de valeur principale</label>
              <textarea class="form-textarea" id="profil-value-prop" rows="2" placeholder="Quel est le bénéfice #1 que vous apportez à vos clients ?">Réduction de 40% du temps de recrutement grâce à une méthode structurée d'approche directe et d'évaluation des candidats.</textarea>
            </div>
            <div class="form-group full">
              <label class="form-label">Preuves sociales / Résultats clients</label>
              <textarea class="form-textarea" id="profil-social-proof" rows="3" placeholder="Chiffres clés, témoignages, études de cas...">- 35 PME accompagnées depuis 2020
- 40% de réduction moyenne du temps de recrutement
- 92% de clients satisfaits (NPS > 60)
- Cas Nexia Conseil : 2 jours/mois récupérés sur le reporting</textarea>
            </div>
          </div>
        </div>
      </div>

      <!-- Pain Points -->
      <div class="card">
        <div class="card-header"><div class="card-title">🎯 Douleurs clients ciblées</div></div>
        <div class="card-body">
          <div class="form-stack">
            <div class="form-group full">
              <label class="form-label">Pain points principaux de vos prospects</label>
              <textarea class="form-textarea" id="profil-pain-points" rows="4" placeholder="Listez les problèmes que rencontrent vos prospects (un par ligne)">- Temps de recrutement trop long (3-6 mois par poste)
- Coût élevé des erreurs de recrutement (15-45K€ par échec)
- Manque de candidatures qualifiées
- Processus RH non structurés / manuels
- Difficulté à attirer les talents dans les PME vs grands groupes</textarea>
            </div>
            <div class="form-group full">
              <label class="form-label">Objections fréquentes</label>
              <textarea class="form-textarea" id="profil-objections" rows="3" placeholder="Quelles objections entendez-vous le plus souvent ?">- "On gère déjà nos recrutements en interne"
- "Pas le budget pour un accompagnement externe"
- "On a déjà un cabinet de recrutement"
- "Ce n'est pas le bon moment"</textarea>
            </div>
          </div>
        </div>
      </div>

      <!-- Target Personas -->
      <div class="card">
        <div class="card-header"><div class="card-title">👤 Personas cibles</div></div>
        <div class="card-body">
          <div class="form-stack">
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Décideur principal</label>
                <input class="form-input" id="profil-persona-primary" placeholder="Ex: DRH, DAF, CEO" value="DRH / Directeur RH">
              </div>
              <div class="form-group">
                <label class="form-label">Décideur secondaire</label>
                <input class="form-input" id="profil-persona-secondary" placeholder="Ex: DG, Directeur Ops" value="DG / Dirigeant">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Secteurs prioritaires</label>
                <input class="form-input" id="profil-target-sectors" placeholder="Ex: IT, Finance, Formation" value="Formation, Conseil RH, Comptabilité & Finance">
              </div>
              <div class="form-group">
                <label class="form-label">Taille entreprise cible</label>
                <input class="form-input" id="profil-target-size" placeholder="Ex: 11-200 salariés" value="11-200 salariés">
              </div>
            </div>
            <div class="form-group full">
              <label class="form-label">Zones géographiques</label>
              <input class="form-input" id="profil-target-zones" placeholder="Ex: Île-de-France, Lyon, France entière" value="Île-de-France, Lyon & Rhône-Alpes">
            </div>
          </div>
        </div>
      </div>

      <!-- Copy Preferences -->
      <div class="card">
        <div class="card-header"><div class="card-title">✍️ Préférences de copy</div></div>
        <div class="card-body">
          <div class="form-stack">
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Ton par défaut</label>
                <select class="form-select" id="profil-default-tone">
                  <option selected>Pro décontracté</option>
                  <option>Formel & Corporate</option>
                  <option>Direct & punchy</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Formalité</label>
                <select class="form-select" id="profil-default-formality">
                  <option selected>Vous</option>
                  <option>Tu</option>
                </select>
              </div>
            </div>
            <div class="form-group full">
              <label class="form-label">Mots/phrases à éviter</label>
              <input class="form-input" id="profil-avoid-words" placeholder="Ex: gratuit, IA, automatisé" value="gratuit, IA, automatisé, robot, spam, offre exclusive">
            </div>
            <div class="form-group full">
              <label class="form-label">Expressions signatures / vocabulaire maison</label>
              <textarea class="form-textarea" id="profil-signature-phrases" rows="2" placeholder="Phrases ou expressions que vous utilisez souvent...">méthode structurée, approche directe, conseil à valeur ajoutée, transformation RH</textarea>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ═══════════ PARAMÈTRES PAGE ═══════════ -->
  <div id="page-settings" style="display:none;">
    <div class="page-header">
      <div>
        <div class="page-title">Paramètres</div>
        <div class="page-subtitle">Configuration des intégrations et préférences</div>
      </div>
      <div class="header-actions">
        <button class="btn btn-primary" onclick="saveSettings()">💾 Enregistrer</button>
      </div>
    </div>

    <div class="settings-grid">
      <!-- API Keys -->
      <div class="card">
        <div class="card-header"><div class="card-title">🔑 Clés API</div></div>
        <div class="card-body">
          <div class="form-stack">
            <div class="form-group full">
              <label class="form-label">Lemlist API Key</label>
              <div class="input-with-status">
                <input class="form-input mono" id="settings-lemlist-key" type="password" placeholder="Copiez depuis Lemlist → Settings → Integrations → API" data-original-placeholder="Copiez depuis Lemlist → Settings → Integrations → API">
                <span class="input-status" id="status-lemlist">Non connecté</span>
              </div>
              <div class="form-hint">Trouvez-la dans Lemlist → Settings → Integrations → API · <em>Chiffré côté serveur</em></div>
            </div>
            <div class="form-group full">
              <label class="form-label">Notion Integration Token</label>
              <div class="input-with-status">
                <input class="form-input mono" id="settings-notion-token" type="password" placeholder="Copiez depuis notion.so/my-integrations" data-original-placeholder="Copiez depuis notion.so/my-integrations">
                <span class="input-status" id="status-notion">Non connecté</span>
              </div>
              <div class="form-hint">Créez une intégration sur <strong>notion.so/my-integrations</strong>, puis partagez vos pages · <em>Chiffré côté serveur</em></div>
            </div>
            <div class="form-group full">
              <label class="form-label">Anthropic API Key (Claude)</label>
              <div class="input-with-status">
                <input class="form-input mono" id="settings-claude-key" type="password" placeholder="sk-ant-..." data-original-placeholder="sk-ant-...">
                <span class="input-status" id="status-claude">Non connecté</span>
              </div>
              <div class="form-hint">Disponible sur <strong>console.anthropic.com/settings/keys</strong></div>
            </div>
            <button class="btn btn-ghost" style="align-self:flex-start;" onclick="testApiConnections()">🔄 Tester les connexions</button>
          </div>
        </div>
      </div>

      <!-- Lemlist Config -->
      <div class="card">
        <div class="card-header"><div class="card-title">📧 Configuration Lemlist</div></div>
        <div class="card-body">
          <div class="form-stack">
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Limite d'envois / jour</label>
                <select class="form-select" id="settings-lemlist-daily-limit">
                  <option>25 emails/jour</option>
                  <option selected>50 emails/jour</option>
                  <option>100 emails/jour</option>
                  <option>Pas de limite</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Plage horaire d'envoi</label>
                <select class="form-select" id="settings-lemlist-send-window">
                  <option selected>8h — 18h (bureau)</option>
                  <option>9h — 12h (matin uniquement)</option>
                  <option>7h — 20h (étendu)</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Jours d'envoi</label>
                <select class="form-select" id="settings-lemlist-send-days">
                  <option selected>Lundi — Vendredi</option>
                  <option>Lundi — Samedi</option>
                  <option>Tous les jours</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Délai entre connexions LinkedIn</label>
                <select class="form-select" id="settings-linkedin-delay">
                  <option>10 min</option>
                  <option selected>30 min</option>
                  <option>1 heure</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Notifications -->
      <div class="card">
        <div class="card-header"><div class="card-title">🔔 Notifications</div></div>
        <div class="card-body">
          <div class="form-stack">
            <div class="toggle-row">
              <div class="toggle-info">
                <div class="toggle-title">Rapport hebdomadaire</div>
                <div class="toggle-desc">Recevoir un résumé par email chaque lundi</div>
              </div>
              <div class="toggle-switch on" onclick="this.classList.toggle('on')"></div>
            </div>
            <div class="toggle-row">
              <div class="toggle-info">
                <div class="toggle-title">Alertes performance</div>
                <div class="toggle-desc">Notification quand un taux passe sous les seuils</div>
              </div>
              <div class="toggle-switch on" onclick="this.classList.toggle('on')"></div>
            </div>
            <div class="toggle-row">
              <div class="toggle-info">
                <div class="toggle-title">Nouvelles recommandations IA</div>
                <div class="toggle-desc">Alerte quand Claude détecte une opportunité d'optimisation</div>
              </div>
              <div class="toggle-switch on" onclick="this.classList.toggle('on')"></div>
            </div>
            <div class="toggle-row">
              <div class="toggle-info">
                <div class="toggle-title">Réponses prospects</div>
                <div class="toggle-desc">Notification instantanée pour chaque réponse reçue</div>
              </div>
              <div class="toggle-switch" onclick="this.classList.toggle('on')"></div>
            </div>
            <div class="form-group full" style="margin-top:8px;">
              <label class="form-label">Email de notification</label>
              <input class="form-input" id="settings-notif-email" placeholder="votre@email.com" value="goran@formapro-consulting.fr">
            </div>
          </div>
        </div>
      </div>

      <!-- Claude Model -->
      <div class="card">
        <div class="card-header"><div class="card-title">🤖 Configuration Claude</div></div>
        <div class="card-body">
          <div class="form-stack">
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Modèle par défaut</label>
                <select class="form-select" id="settings-claude-model">
                  <option>claude-haiku-4-5 (rapide, économique)</option>
                  <option selected>claude-sonnet-4-6 (équilibré)</option>
                  <option>claude-opus-4-6 (meilleure qualité)</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Mode de validation</label>
                <select class="form-select" id="settings-claude-validation">
                  <option selected>Semi-automatique (valider avant déploiement)</option>
                  <option>Automatique (déployer directement)</option>
                  <option>Manuel (suggestions uniquement)</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Appearance -->
      <div class="card">
        <div class="card-header"><div class="card-title">🎨 Apparence</div></div>
        <div class="card-body">
          <div class="form-stack">
            <div class="toggle-row">
              <div class="toggle-info">
                <div class="toggle-title">Mode clair</div>
                <div class="toggle-desc">Basculer entre le thème sombre et le thème clair</div>
              </div>
              <div class="toggle-switch" id="themeToggle" onclick="toggleTheme()"></div>
            </div>
            <div style="display:flex;gap:10px;margin-top:4px;">
              <button class="btn btn-ghost" style="font-size:12px;padding:8px 14px;flex:1;" onclick="setTheme('dark')">🌙 Sombre</button>
              <button class="btn btn-ghost" style="font-size:12px;padding:8px 14px;flex:1;" onclick="setTheme('light')">☀️ Clair</button>
              <button class="btn btn-ghost" style="font-size:12px;padding:8px 14px;flex:1;" onclick="setTheme('system')">💻 Système</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</main>

<!-- ═══════════ CAMPAIGN CREATOR MODAL ═══════════ -->
<div class="creator-overlay" id="creatorModal">
  <div class="creator-modal">
    <div class="creator-header">
      <h2>✨ Nouvelle campagne</h2>
      <button class="creator-close" onclick="toggleCreator()">✕</button>
    </div>
    <div class="creator-body">
      <div class="form-grid">
        <div class="form-group full">
          <label class="form-label">Nom de la campagne</label>
          <input class="form-input" id="creator-name" placeholder="Ex: DRH PME Lyon — Mars 2026">
        </div>
        <div class="form-group">
          <label class="form-label">Cible — Secteur</label>
          <select class="form-select" id="creator-sector">
            <option>Formation & Éducation</option>
            <option>Comptabilité & Finance</option>
            <option>Juridique & Avocats</option>
            <option>Conseil & Consulting</option>
            <option>IT & Infogérance</option>
            <option>Immobilier B2B</option>
            <option>Santé & Médical</option>
            <option>Marketing & Communication</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Cible — Poste décideur</label>
          <select class="form-select" id="creator-position">
            <option>Dirigeant / Gérant / CEO</option>
            <option>DG / Directeur Général</option>
            <option>DAF / Directeur Financier</option>
            <option>DRH / Directeur RH</option>
            <option>Directeur Commercial</option>
            <option>DSI / Directeur IT</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Taille entreprise</label>
          <select class="form-select" id="creator-size">
            <option>1-10 salariés</option>
            <option>11-50 salariés</option>
            <option>51-200 salariés</option>
            <option>200+ salariés</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Zone géographique</label>
          <select class="form-select" id="creator-zone">
            <option>Île-de-France</option>
            <option>Lyon & Rhône-Alpes</option>
            <option>Marseille & PACA</option>
            <option>France entière</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Ton</label>
          <select class="form-select" id="creator-tone">
            <option>Pro décontracté</option>
            <option>Formel & Corporate</option>
            <option>Direct & punchy</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Canal</label>
          <select class="form-select" id="creator-channel">
            <option>Email + LinkedIn</option>
            <option>Email uniquement</option>
            <option>LinkedIn uniquement</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Angle d'approche</label>
          <select class="form-select" id="creator-angle">
            <option>Douleur client</option>
            <option>Preuve sociale</option>
            <option>Offre directe</option>
            <option>Contenu éducatif</option>
            <option>Laisser Claude choisir</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Volume</label>
          <select class="form-select" id="creator-volume">
            <option>Standard (~100/semaine)</option>
            <option>Modéré (~50/semaine)</option>
            <option>Agressif (~200/semaine)</option>
          </select>
        </div>

        <!-- Inspiration toggle -->
        <div class="inspiration-toggle" onclick="toggleInspiration()">
          <div class="toggle-switch" id="inspiToggle"></div>
          <div class="inspiration-text">
            <h4>💡 Besoin d'inspiration</h4>
            <p>Claude analyse vos campagnes passées et vous propose une campagne optimisée de A à Z</p>
          </div>
        </div>

        <!-- Inspiration panel -->
        <div class="inspiration-panel" id="inspiPanel">
          <div class="inspi-header">
            <div class="inspi-icon">🤖</div>
            <div>
              <div class="inspi-title">Proposition de Claude</div>
              <div class="inspi-sub">Basée sur l'analyse de 2 campagnes et 652 contacts</div>
            </div>
          </div>
          <div class="inspi-suggestion">
            <h5>🎯 Campagne recommandée : "Dirigeants Comptabilité IdF — Douleur"</h5>
            <div class="inspi-params">
              <div class="inspi-param">
                <div class="inspi-param-label">Secteur</div>
                <div class="inspi-param-value">Comptabilité & Finance</div>
              </div>
              <div class="inspi-param">
                <div class="inspi-param-label">Poste</div>
                <div class="inspi-param-value">Dirigeant / CEO</div>
              </div>
              <div class="inspi-param">
                <div class="inspi-param-label">Taille</div>
                <div class="inspi-param-value">11-50 salariés</div>
              </div>
              <div class="inspi-param">
                <div class="inspi-param-label">Zone</div>
                <div class="inspi-param-value">Île-de-France</div>
              </div>
              <div class="inspi-param">
                <div class="inspi-param-label">Canal</div>
                <div class="inspi-param-value">Email + LinkedIn</div>
              </div>
              <div class="inspi-param">
                <div class="inspi-param-label">Volume</div>
                <div class="inspi-param-value">Standard (~100/sem)</div>
              </div>
            </div>
            <div class="inspi-reason">
              <strong>Pourquoi cette campagne :</strong> Votre meilleur taux de conversion (9.2%) vient du segment DAF/Comptabilité. En ciblant les dirigeants (au lieu des DAF), vous touchez le décideur final — vos données montrent +11.3% de taux de réponse sur ce poste. L'angle "douleur client" surperforme de 3.2pts dans ce secteur. Le canal hybride combine le reach email (62% d'ouverture) et la conversion LinkedIn (33% de ratio réponse→RDV).
            </div>
            <div class="inspi-actions">
              <button class="btn btn-success" style="font-size:13px;" onclick="applyInspirationSuggestion()">✅ Lancer cette campagne</button>
              <button class="btn btn-ghost" style="font-size:13px;" onclick="rotateInspiration()">🔄 Autre suggestion</button>
              <button class="btn btn-ghost" style="font-size:13px;" onclick="closeInspirationToEdit()">✏️ Modifier les paramètres</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="creator-footer" id="creatorFooter">
      <button class="btn btn-ghost" onclick="toggleCreator()">Annuler</button>
      <button class="btn btn-primary" onclick="createCampaign()">🚀 Créer la campagne</button>
    </div>
  </div>
</div>

<!-- Demo / New-user mode toggle -->
<div class="demo-toggle active" id="demoToggle" onclick="toggleDemoMode()">
  <div class="demo-toggle-switch"></div>
  <span id="demoToggleLabel">Données démo</span>
</div>

<script src="api-client.js"></script>
<script src="chat.js"></script>
<script src="chat-engine.js"></script>
<script src="campaigns-data.js"></script>
<script src="nav.js"></script>
<script src="campaigns-detail.js"></script>
<script src="copy-editor.js"></script>
<script src="variables.js"></script>
<script src="vargen.js"></script>
<script src="recos.js"></script>
<script src="pages.js"></script>
<script src="app.js"></script>

</body>
</html>
